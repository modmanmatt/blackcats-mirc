[aliases]
n0=;;;GuildFTPD Script (Alias File) ver 0.998-2.0.5 by EZJohnson
n1=;;;Questions/Comments visit http://www.guildftpd.com
n2=
n3=;;; List of aliases: (42 total)
n4=;;; GFTPDhelp.win, GFTPDstart, GFTPDfirstload, GFTPCustomize, 
n5=;;; GFTPDsiterefresh, GFTPDportrefresh, GFTPDPassHop, GFTPDLog, GFTPDnickmode
n6=;;; GFTPDConnection, GFTPDLogon, GFTPDnotexempt, GFTPDLogoff, GFTPDUpdate, GFTPDUnBannedIP, GFTPBannedIP
n7=;;; GFTPDgetline, GFTPDporthop, GFTPDportchange, GFTPDPortUpdate, GFTPDStatusUpdate, GFTPDWinOpen
n8=;;; gp, gc, gm, gt, gpa, gd, gu, gb, gn, ezdisks, GFTPDreadbans, GFTPDreadusers, GFTPDkick
n9=;;; GFTPStats, GFTPDadmin, GFTPDban, GFTPDConnUpdate, GFTPDConnsList, GFTPDCurrentConns, GFTPDbandwidth
n10=
n11=GFTPDhelp.win { if ($dialog(GFTPDHelp) != $null) { did -r GFTPDHelp 2 } | else { dialog -m GFTPDHelp GFTPDHelp } | loadbuf 1- $+ $lines($$1) -po GFTPDHelp 2 $1 }
n12=
n13=GFTPDstart {
n14=  set %GFTPDddeconntemp $replace($readini(gftpd\gftpd.ini,GFTPDDlg,MaxConnsList),$chr(32),$chr(46))
n15=  if (system isin %GFTPDddeconntemp) {
n16=    set %GFTPDddeconntemp $deltok(%GFTPDddeconntemp,$findtok(%GFTPDddeconntemp,system,1,46) $+ - $+ $calc($findtok(%GFTPDddeconntemp,system,1,46) + 1),46)
n17=  }
n18=  remini Gftpd/Gftpd.ini GFTPDDlg ConnsList
n19=  remini Gftpd/Gftpd.ini GFTPDDlg MaxConnsList
n20=  dde %GFTPDddename connslist ""
n21=  set -u20 %GFTPDconnddecheck 1
n22=  set %GFTPcntrdde 1
n23=  while (%GFTPcntrdde <= $numtok(%GFTPDddeconntemp,46)) {
n24=    if (%GFTPDddeconntemp != $null) {
n25=      dde %GFTPDddename connslist "" $gettok(%GFTPDddeconntemp,%GFTPcntrdde,46)
n26=    }
n27=    inc %GFTPcntrdde 2
n28=  }
n29=  set %GFTPcntrdde 1
n30=  while (%GFTPcntrdde <= $numtok($readini(gftpd\gftpd.ini,GFTPDDlg,multiportlist),46)) {
n31=    if ($readini(gftpd\gftpd.ini,GFTPDDlg,multiportList) != $null) {
n32=      dde %GFTPDddename connslist "" $gettok($readini(gftpd\gftpd.ini,GFTPDDlg,mutliportList),%GFTPcntrdde,46)
n33=    }
n34=    inc %GFTPcntrdde 2
n35=  }
n36=  set %GFTPcntrdde 1
n37=  while (%GFTPcntrdde <= $numtok($readini(gftpd\gftpd.ini,GFTPDDlg,NotExemptList), 46)) {
n38=    if ($readini(gftpd\gftpd.ini,GFTPDDlg,NotExemptList) != $null) {
n39=      dde %GFTPDddename connslist "" $gettok($readini(gftpd\gftpd.ini,GFTPDDlg,NotExemptList),%GFTPcntrdde,46)
n40=    }
n41=    inc %GFTPcntrdde
n42=  }
n43=  unset %GFTPcntrdde
n44=  unset %GFTPDddeconntemp
n45=  GFTPDsiterefresh
n46=  GFTPDportrefresh
n47=  if ($dialog(@GuildFTPD) == $null) { GFTPDWinOpen }
n48=  .ial on
n49=}
n50=
n51=GFTPDfirstload {
n52=  .ial on
n53=  if ($dialog(@GuildFTPD) == $null) { GFTPDWinOpen }
n54=  set %GFTPdir $sdir($mircdirGuildFTPd\,"Where Is GuildFTP's directory?")
n55=  set %GFTPbanfile %GFTPdir $+ banlist.txt
n56=  set %GFTPDver 0.998-2.0.5
n57=  writeini Gftpd/Gftpd.ini GFTPDDlg Banfile %GFTPbanfile
n58=  writeini Gftpd/Gftpd.ini GFTPDDlg GFTPDdir %GFTPdir
n59=  unset %GFTPport
n60=  GFTPDlog GuildFTPDScript %GFTPDver Multi-server by EZJohnson Initialized and Ready For Use!
n61=}
n62=
n63=GFTPDCustomize { dialog -m GFTPDDlg GFTPDDlg }
n64=
n65=GFTPDncsplit {
n66=  ; $1 = type, $2 = data 
n67=  if ($1 == chan) { return $gettok($2,1,32) }
n68=  if ($1 == net) { return $gettok($2,2,32) }
n69=  else return
n70=}
n71=
n72=GFTPDsiterefresh {
n73=  %GFTPTemp = $readini Gftpd/Gftpd.ini GFTPDDlg PassHopRate
n74=  %GFTPTemp = $calc(%GFTPTemp * 60)
n75=  %GFTPTemp2 = $readini Gftpd/Gftpd.ini GFTPDDlg PassHopEnable
n76=  if (%GFTPTemp2 == 1) { .timerGFTPpsh -o 0 %GFTPTemp GFTPDpasshop }
n77=  else { .timerGFTPpsh off }
n78=  %GFTPTemp = $readini Gftpd/Gftpd.ini GFTPDDlg AdTimer
n79=  %GFTPTemp2 = $readini Gftpd/Gftpd.ini GFTPDDlg AdEnable
n80=  if (%GFTPTemp2 == 1) { 
n81=    if ($readini Gftpd/Gftpd.ini GFTPDDlg Chan1 != $null) && (%GFTPad != $null) { 
n82=      set %gftpdcidloop 1
n83=      set %gftpdcidnum $scon(0)   
n84=      while (%gftpdcidloop <= %gftpdcidnum) {
n85=        if ($scon(%gftpdcidloop).$network == $GFTPDncsplit(net,$readini(Gftpd/Gftpd.ini,GFTPDDlg,Chan1))) {
n86=          scon %gftpdcidloop .timerGFTPad1 0 $readini Gftpd/Gftpd.ini GFTPDDlg AdTimer msg $GFTPDncsplit(chan,$readini(Gftpd/Gftpd.ini,GFTPDDlg,Chan1))) %GFTPad
n87=        }
n88=        inc %gftpdcidloop
n89=      }
n90=      unset %gftpdcidloop %gftpdcidnum
n91=    }
n92=    if ($readini Gftpd/Gftpd.ini GFTPDDlg Chan2 != $null) && (%GFTPad != $null) { 
n93=      set %gftpdcidloop 1
n94=      set %gftpdcidnum $scon(0)   
n95=      while (%gftpdcidloop <= %gftpdcidnum) {
n96=        if ($scon(%gftpdcidloop).$network == $GFTPDncsplit(net,$readini(Gftpd/Gftpd.ini,GFTPDDlg,Chan2))) {
n97=          scon %gftpdcidloop .timerGFTPad2 0 $readini Gftpd/Gftpd.ini GFTPDDlg AdTimer msg $GFTPDncsplit(chan,$readini(Gftpd/Gftpd.ini,GFTPDDlg,Chan2))) %GFTPad
n98=        }
n99=        inc %gftpdcidloop
n100=      }
n101=      unset %gftpdcidloop %gftpdcidnum
n102=    }
n103=    if ($readini Gftpd/Gftpd.ini GFTPDDlg Chan3 != $null) && (%GFTPad != $null) { 
n104=      set %gftpdcidloop 1
n105=      set %gftpdcidnum $scon(0)   
n106=      while (%gftpdcidloop <= %gftpdcidnum) {
n107=        if ($scon(%gftpdcidloop).$network == $GFTPDncsplit(net,$readini(Gftpd/Gftpd.ini,GFTPDDlg,Chan3))) {
n108=          scon %gftpdcidloop .timerGFTPad3 0 $readini Gftpd/Gftpd.ini GFTPDDlg AdTimer msg $GFTPDncsplit(chan,$readini(Gftpd/Gftpd.ini,GFTPDDlg,Chan3))) %GFTPad
n109=        }
n110=        inc %gftpdcidloop
n111=      }
n112=      unset %gftpdcidloop %gftpdcidnum
n113=    }
n114=    if ($readini Gftpd/Gftpd.ini GFTPDDlg Chan4 != $null) && (%GFTPad != $null) { 
n115=      set %gftpdcidloop 1
n116=      set %gftpdcidnum $scon(0)   
n117=      while (%gftpdcidloop <= %gftpdcidnum) {
n118=        if ($scon(%gftpdcidloop).$network == $GFTPDncsplit(net,$readini(Gftpd/Gftpd.ini,GFTPDDlg,Chan4))) {
n119=          scon %gftpdcidloop .timerGFTPad4 0 $readini Gftpd/Gftpd.ini GFTPDDlg AdTimer msg $GFTPDncsplit(chan,$readini(Gftpd/Gftpd.ini,GFTPDDlg,Chan4))) %GFTPad
n120=        }
n121=        inc %gftpdcidloop
n122=      }
n123=      unset %gftpdcidloop %gftpdcidnum
n124=    }
n125=    if ($readini Gftpd/Gftpd.ini GFTPDDlg Chan5 != $null) && (%GFTPad != $null) { 
n126=      set %gftpdcidloop 1
n127=      set %gftpdcidnum $scon(0)   
n128=      while (%gftpdcidloop <= %gftpdcidnum) {
n129=        if ($scon(%gftpdcidloop).$network == $GFTPDncsplit(net,$readini(Gftpd/Gftpd.ini,GFTPDDlg,Chan5))) {
n130=          scon %gftpdcidloop .timerGFTPad5 0 $readini Gftpd/Gftpd.ini GFTPDDlg AdTimer msg $GFTPDncsplit(chan,$readini(Gftpd/Gftpd.ini,GFTPDDlg,Chan5))) %GFTPad
n131=        }
n132=        inc %gftpdcidloop
n133=      }
n134=      unset %gftpdcidloop %gftpdcidnum
n135=    }
n136=    if ($readini Gftpd/Gftpd.ini GFTPDDlg Chan6 != $null) && (%GFTPad != $null) { 
n137=      set %gftpdcidloop 1
n138=      set %gftpdcidnum $scon(0)   
n139=      while (%gftpdcidloop <= %gftpdcidnum) {
n140=        if ($scon(%gftpdcidloop).$network == $GFTPDncsplit(net,$readini(Gftpd/Gftpd.ini,GFTPDDlg,Chan6))) {
n141=          scon %gftpdcidloop .timerGFTPad6 0 $readini Gftpd/Gftpd.ini GFTPDDlg AdTimer msg $GFTPDncsplit(chan,$readini(Gftpd/Gftpd.ini,GFTPDDlg,Chan6))) %GFTPad
n142=        }
n143=        inc %gftpdcidloop
n144=      }
n145=      unset %gftpdcidloop %gftpdcidnum
n146=    }
n147=    if ($readini Gftpd/Gftpd.ini GFTPDDlg Chan7 != $null) && (%GFTPad != $null) { 
n148=      set %gftpdcidloop 1
n149=      set %gftpdcidnum $scon(0)   
n150=      while (%gftpdcidloop <= %gftpdcidnum) {
n151=        if ($scon(%gftpdcidloop).$network == $GFTPDncsplit(net,$readini(Gftpd/Gftpd.ini,GFTPDDlg,Chan7))) {
n152=          scon %gftpdcidloop .timerGFTPad7 0 $readini Gftpd/Gftpd.ini GFTPDDlg AdTimer msg $GFTPDncsplit(chan,$readini(Gftpd/Gftpd.ini,GFTPDDlg,Chan7))) %GFTPad
n153=        }
n154=        inc %gftpdcidloop
n155=      }
n156=      unset %gftpdcidloop %gftpdcidnum
n157=    }
n158=    if ($readini Gftpd/Gftpd.ini GFTPDDlg Chan8 != $null) && (%GFTPad != $null) { 
n159=      set %gftpdcidloop 1
n160=      set %gftpdcidnum $scon(0)   
n161=      while (%gftpdcidloop <= %gftpdcidnum) {
n162=        if ($scon(%gftpdcidloop).$network == $GFTPDncsplit(net,$readini(Gftpd/Gftpd.ini,GFTPDDlg,Chan8))) {
n163=          scon %gftpdcidloop .timerGFTPad8 0 $readini Gftpd/Gftpd.ini GFTPDDlg AdTimer msg $GFTPDncsplit(chan,$readini(Gftpd/Gftpd.ini,GFTPDDlg,Chan8))) %GFTPad
n164=        }
n165=        inc %gftpdcidloop
n166=      }
n167=      unset %gftpdcidloop %gftpdcidnum
n168=    }
n169=    if ($readini Gftpd/Gftpd.ini GFTPDDlg Chan9 != $null) && (%GFTPad != $null) { 
n170=      set %gftpdcidloop 1
n171=      set %gftpdcidnum $scon(0)   
n172=      while (%gftpdcidloop <= %gftpdcidnum) {
n173=        if ($scon(%gftpdcidloop).$network == $GFTPDncsplit(net,$readini(Gftpd/Gftpd.ini,GFTPDDlg,Chan9))) {
n174=          scon %gftpdcidloop .timerGFTPad9 0 $readini Gftpd/Gftpd.ini GFTPDDlg AdTimer msg $GFTPDncsplit(chan,$readini(Gftpd/Gftpd.ini,GFTPDDlg,Chan9))) %GFTPad
n175=        }
n176=        inc %gftpdcidloop
n177=      }
n178=      unset %gftpdcidloop %gftpdcidnum
n179=    }
n180=    if ($readini Gftpd/Gftpd.ini GFTPDDlg Chan10 != $null) && (%GFTPad != $null) { 
n181=      set %gftpdcidloop 1
n182=      set %gftpdcidnum $scon(0)   
n183=      while (%gftpdcidloop <= %gftpdcidnum) {
n184=        if ($scon(%gftpdcidloop).$network == $GFTPDncsplit(net,$readini(Gftpd/Gftpd.ini,GFTPDDlg,Chan10))) {
n185=          scon %gftpdcidloop .timerGFTPad10 0 $readini Gftpd/Gftpd.ini GFTPDDlg AdTimer msg $GFTPDncsplit(chan,$readini(Gftpd/Gftpd.ini,GFTPDDlg,Chan10))) %GFTPad
n186=        }
n187=        inc %gftpdcidloop
n188=      }
n189=      unset %gftpdcidloop %gftpdcidnum
n190=    }
n191=  }
n192=  else { 
n193=    .timerGFTPad1 off
n194=    .timerGFTPad2 off
n195=    .timerGFTPad3 off
n196=    .timerGFTPad4 off
n197=    .timerGFTPad5 off
n198=    .timerGFTPad6 off
n199=    .timerGFTPad7 off
n200=    .timerGFTPad8 off
n201=    .timerGFTPad9 off
n202=    .timerGFTPad10 off
n203=  } 
n204=  unset %GFTPTemp
n205=  unset %GFTPTemp2
n206=}
n207=
n208=GFTPDportrefresh {
n209=  %GFTPTemp = $readini Gftpd/Gftpd.ini GFTPDPortDlg PortHopRate
n210=  %GFTPTemp = $calc(%GFTPTemp * 60)
n211=  %GFTPTemp2 = $readini Gftpd/Gftpd.ini GFTPDPortDlg PortHop
n212=  if (%GFTPTemp == 0) { return }
n213=  if (%GFTPTemp2 == 1) { .timerGFTPph -o 0 %GFTPTemp GFTPDporthop }
n214=  else { .timerGFTPph off }
n215=  unset %GFTPTemp
n216=  unset %GFTPTemp2
n217=}
n218=
n219=GFTPDpasshop {
n220=  %GFTPPassHopList = $readini Gftpd/Gftpd.ini GFTPDDlg PassHopList
n221=  %GFTPInfoColor = $readini Gftpd/Gftpd.ini GFTPDColorDlg InfoColor
n222=  if ($numtok(%GFTPPassHopList, 32) >= 1) {
n223=    %GFTPcntr = 1
n224=    :chpass
n225=    if ($readini Gftpd/Gftpd.ini GFTPDDlg RealWords == 1) {
n226=      set %gftpphlogin $gettok(%GFTPPassHopList,%GFTPcntr,32)
n227=      set %gftpphpass $read(gftpd/passhop.txt)
n228=      dde %GFTPDddename ChangePass "" %gftpphlogin %gftpphpass
n229=      GFTPDlog $chr(91) $+  $+ %GFTPInfoColor %gftpphlogin Has New Password: $+ %GFTPInfoColor %gftpphpass $chr(93)
n230=      %GFTPTemp = $readini Gftpd/Gftpd.ini GFTPDDlg PassWordList
n231=      %GFTPTemp2 = $calc($findtok(%GFTPTemp,%gftpphlogin,1,32) + 1)
n232=      if ($istok(%GFTPTemp,%gftpphlogin,32)) { %GFTPTemp = $puttok(%GFTPTemp,%gftpphpass,%GFTPTemp2,32) }
n233=      else { %GFTPTemp = %GFTPTemp %gftpphlogin %gftpphpass }
n234=      writeini Gftpd/Gftpd.ini GFTPDDlg PasswordList %GFTPTemp
n235=      unset %GFTPTemp2
n236=      unset %GFTPTemp
n237=    }
n238=    else {
n239=      set %gftpphlogin $gettok(%GFTPPassHopList,%GFTPcntr,32)
n240=      set %gftpphpass $replace($readini(gftpd/gftpd.ini,GFTPDDlg,passmask),C,$rand(A,Z),c,$rand(a,z),V,$rand(A,Z),v,$rand(a,a),N,$rand(0,9),n,$rand(0,9))
n241=      dde %GFTPDddename ChangePass "" %gftpphlogin %gftpphpass
n242=      GFTPDlog $chr(91) $+  $+ %GFTPInfoColor %gftpphlogin Has New Password: $+ %GFTPInfoColor %gftpphpass $chr(93)
n243=      %GFTPTemp = $readini Gftpd/Gftpd.ini GFTPDDlg PassWordList
n244=      %GFTPTemp2 = $calc($findtok(%GFTPTemp,%gftpphlogin,1,32) + 1)
n245=      if ($istok(%GFTPTemp,%gftpphlogin,32)) { %GFTPTemp = $puttok(%GFTPTemp,%gftpphpass,%GFTPTemp2,32) }
n246=      else { %GFTPTemp = %GFTPTemp %gftpphlogin %gftpphpass }
n247=      writeini Gftpd/Gftpd.ini GFTPDDlg PasswordList %GFTPTemp
n248=      unset %GFTPTemp2
n249=      unset %GFTPTemp
n250=    }  
n251=    inc %GFTPcntr 1
n252=    if (%GFTPcntr <= $numtok(%GFTPPassHopList, 32)) { goto chpass }
n253=  }
n254=  unset %GFTPPassHopList
n255=  unset %GFTPcntr
n256=  unset %GFTPInfoColor
n257=}
n258=
n259=GFTPDlog { 
n260=  if ($window(@GuildFTPD) != $null) { aline -p @GuildFTPD $chr(91) $+ $asctime(hh:nntt) $+ $chr(93) $1- }
n261=  if ($readini Gftpd/Gftpd.ini GFTPDlogDlg LogEnable == 1) { 
n262=    if ($readini Gftpd/Gftpd.ini GFTPDlogDlg DateLogs == 0) { write gftpd\gftpd.log $strip($chr(91) $+ $asctime(hh:nntt) $+ $chr(93) $1-) }
n263=    elseif ($readini Gftpd/Gftpd.ini GFTPDlogDlg DateLogs == 1) { 
n264=      write gftpd\gftpd $+ $replace($adate,/,-) $+ .log $strip($chr(91) $+ $asctime(hh:nntt) $+ $chr(93) $1-)
n265=    }
n266=  }
n267=}
n268=
n269=GFTPDNickmode {
n270=  ; $1 = nick $2 = chan $3 = type
n271=  if ($3 == !ison) {
n272=    if ($1 ison $2) {
n273=      return 1
n274=    }
n275=    else {
n276=      return 0
n277=    }
n278=  }
n279=  elseif ($3 == !isvoice) {
n280=    if ($1 isvoice $2) {
n281=      return 1
n282=    }
n283=    elseif ($1 isop $2) { return 1 }
n284=    else {
n285=      return 0
n286=    }
n287=  }
n288=}
n289=
n290=GFTPDConnection { 
n291=  ;$1= IPADDR - $2= HostName 
n292=  set %GFTPhost *!*@ $+ $2
n293=  set %GFTPip *!*@ $+ $1
n294=  GFTPDreadusers kick $1
n295=  %GFTPInfoColor = $readini Gftpd/Gftpd.ini GFTPDColorDlg InfoColor
n296=  %GFTPNickColor = $readini Gftpd/Gftpd.ini GFTPDColorDlg NickColor
n297=  %GFTPChan1 = $GFTPDncsplit(chan,$readini(Gftpd/Gftpd.ini,GFTPDDlg,Chan1))
n298=  %GFTPChan2 = $GFTPDncsplit(chan,$readini(Gftpd/Gftpd.ini,GFTPDDlg,Chan2))
n299=  %GFTPChan3 = $GFTPDncsplit(chan,$readini(Gftpd/Gftpd.ini,GFTPDDlg,Chan3))
n300=  %GFTPChan4 = $GFTPDncsplit(chan,$readini(Gftpd/Gftpd.ini,GFTPDDlg,Chan4))
n301=  %GFTPChan5 = $GFTPDncsplit(chan,$readini(Gftpd/Gftpd.ini,GFTPDDlg,Chan5))
n302=  %GFTPChan6 = $GFTPDncsplit(chan,$readini(Gftpd/Gftpd.ini,GFTPDDlg,Chan6))
n303=  %GFTPChan7 = $GFTPDncsplit(chan,$readini(Gftpd/Gftpd.ini,GFTPDDlg,Chan7))
n304=  %GFTPChan8 = $GFTPDncsplit(chan,$readini(Gftpd/Gftpd.ini,GFTPDDlg,Chan8))
n305=  %GFTPChan9 = $GFTPDncsplit(chan,$readini(Gftpd/Gftpd.ini,GFTPDDlg,Chan9))
n306=  %GFTPChan10 = $GFTPDncsplit(chan,$readini(Gftpd/Gftpd.ini,GFTPDDlg,Chan10))
n307=  %GFTPNet1 = $GFTPDncsplit(net,$readini(Gftpd/Gftpd.ini,GFTPDDlg,Chan1))
n308=  %GFTPNet2 = $GFTPDncsplit(net,$readini(Gftpd/Gftpd.ini,GFTPDDlg,Chan2))
n309=  %GFTPNet3 = $GFTPDncsplit(net,$readini(Gftpd/Gftpd.ini,GFTPDDlg,Chan3))
n310=  %GFTPNet4 = $GFTPDncsplit(net,$readini(Gftpd/Gftpd.ini,GFTPDDlg,Chan4))
n311=  %GFTPNet5 = $GFTPDncsplit(net,$readini(Gftpd/Gftpd.ini,GFTPDDlg,Chan5))
n312=  %GFTPNet6 = $GFTPDncsplit(net,$readini(Gftpd/Gftpd.ini,GFTPDDlg,Chan6))
n313=  %GFTPNet7 = $GFTPDncsplit(net,$readini(Gftpd/Gftpd.ini,GFTPDDlg,Chan7))
n314=  %GFTPNet8 = $GFTPDncsplit(net,$readini(Gftpd/Gftpd.ini,GFTPDDlg,Chan8))
n315=  %GFTPNet9 = $GFTPDncsplit(net,$readini(Gftpd/Gftpd.ini,GFTPDDlg,Chan9))
n316=  %GFTPNet10 = $GFTPDncsplit(net,$readini(Gftpd/Gftpd.ini,GFTPDDlg,Chan10))
n317=  %GFTPKickNotOnChan = $readini Gftpd/Gftpd.ini GFTPDDlg KickNotOnChan
n318=  if ($readini Gftpd/Gftpd.ini GFTPDDlg VoicedOnChan == 0) { %GFTPVoicedOnChan = !ison }
n319=  elseif ($readini Gftpd/Gftpd.ini GFTPDDlg VoicedOnChan == 1) { %GFTPVoicedOnChan = !isvoice }
n320=  %GFTPBanNotOnChan = $readini Gftpd/Gftpd.ini GFTPDDlg BanNotOnChan
n321=  %GFTPNotOnChanBanDur = $readini Gftpd/Gftpd.ini GFTPDDlg NotOnChanBanDur
n322=  %GFTPExemptEnable = $readini Gftpd/Gftpd.ini GFTPDDlg ExemptEnable
n323=  set %gftpdcidloopa 1
n324=  set %gftpdcidnuma $scon(0)   
n325=  while (%gftpdcidloopa <= %gftpdcidnuma) {
n326=    if ($scon(%gftpdcidloopa).$network == %GFTPNet1) || ($scon(%gftpdcidloopa).$network == %GFTPNet2) || ($scon(%gftpdcidloopa).$network == %GFTPNet3) || ($scon(%gftpdcidloopa).$network == %GFTPNet4) || ($scon(%gftpdcidloopa).$network == %GFTPNet5) || ($scon(%gftpdcidloopa).$network == %GFTPNet6) || ($scon(%gftpdcidloopa).$network == %GFTPNet7) || ($scon(%gftpdcidloopa).$network == %GFTPNet8) || ($scon(%gftpdcidloopa).$network == %GFTPNet9) || ($scon(%gftpdcidloopa).$network == %GFTPNet10) {
n327=      scon %gftpdcidloopa
n328=      if (. !isin %GFTPhost) { set %GFTPnick $ial(%GFTPip,1).nick }
n329=      else { 
n330=        set %GFTPnick $ial(%GFTPhost,1).nick
n331=        if ($ial(%GFTPip,0) != 0) { set %GFTPnick $ial(%GFTPip,1).nick }
n332=      }
n333=      if (%GFTPnick == $null) { set %GFTPnick $1 }
n334=      if (. !isin %GFTPnick) { goto cidnickdone }
n335=    }
n336=    inc %gftpdcidloopa
n337=  }
n338=  :cidnickdone
n339=  set %gftpdcidloopa 1
n340=  set %gftpdcidnuma $scon(0)   
n341=  while (%gftpdcidloopa <= %gftpdcidnuma) {
n342=    if ($scon(%gftpdcidloopa).$network == %GFTPNet1) || ($scon(%gftpdcidloopa).$network == %GFTPNet2) || ($scon(%gftpdcidloopa).$network == %GFTPNet3) || ($scon(%gftpdcidloopa).$network == %GFTPNet4) || ($scon(%gftpdcidloopa).$network == %GFTPNet5) || ($scon(%gftpdcidloopa).$network == %GFTPNet6) || ($scon(%gftpdcidloopa).$network == %GFTPNet7) || ($scon(%gftpdcidloopa).$network == %GFTPNet8) || ($scon(%gftpdcidloopa).$network == %GFTPNet9) || ($scon(%gftpdcidloopa).$network == %GFTPNet10) {
n343=      scon %gftpdcidloopa
n344=      if ($ialchan(*,%GFTPchan1,0) != $nick(%GFTPchan1,0)) { set %GFTPWhoFull 0 }
n345=      elseif ($ialchan(*,%GFTPchan2,0) != $nick(%GFTPchan2,0)) { set %GFTPWhoFull 0 }
n346=      elseif ($ialchan(*,%GFTPchan3,0) != $nick(%GFTPchan3,0)) { set %GFTPWhoFull 0 }
n347=      elseif ($ialchan(*,%GFTPchan4,0) != $nick(%GFTPchan4,0)) { set %GFTPWhoFull 0 }
n348=      elseif ($ialchan(*,%GFTPchan5,0) != $nick(%GFTPchan5,0)) { set %GFTPWhoFull 0 }
n349=      elseif ($ialchan(*,%GFTPchan6,0) != $nick(%GFTPchan6,0)) { set %GFTPWhoFull 0 }
n350=      elseif ($ialchan(*,%GFTPchan7,0) != $nick(%GFTPchan7,0)) { set %GFTPWhoFull 0 }
n351=      elseif ($ialchan(*,%GFTPchan8,0) != $nick(%GFTPchan8,0)) { set %GFTPWhoFull 0 }
n352=      elseif ($ialchan(*,%GFTPchan9,0) != $nick(%GFTPchan9,0)) { set %GFTPWhoFull 0 }
n353=      elseif ($ialchan(*,%GFTPchan10,0) != $nick(%GFTPchan10,0)) { set %GFTPWhoFull 0 }
n354=      else {
n355=        set %GFTPWhoFull 1
n356=        goto ciddone
n357=      }
n358=    }
n359=    inc %gftpdcidloopa
n360=  }
n361=  :ciddone
n362=  unset %gftpdcidloopa %gftpdcidnuma
n363=  if (%GFTPnick == $null) { set %GFTPnick $1 }
n364=  GFTPDlog $chr(91) $+  $+ %GFTPNickColor %GFTPnick Is $+ %GFTPInfoColor Logging In $chr(93)
n365=  if (%GFTPWhoFull == 0) {
n366=    set %gftpdcidloopa 1
n367=    set %gftpdcidnuma $scon(0)   
n368=    while (%gftpdcidloopa <= %gftpdcidnuma) {
n369=      if ($scon(%gftpdcidloopa).$network == %GFTPNet1) || ($scon(%gftpdcidloopa).$network == %GFTPNet2) || ($scon(%gftpdcidloopa).$network == %GFTPNet3) || ($scon(%gftpdcidloopa).$network == %GFTPNet4) || ($scon(%gftpdcidloopa).$network == %GFTPNet5) || ($scon(%gftpdcidloopa).$network == %GFTPNet6) || ($scon(%gftpdcidloopa).$network == %GFTPNet7) || ($scon(%gftpdcidloopa).$network == %GFTPNet8) || ($scon(%gftpdcidloopa).$network == %GFTPNet9) || ($scon(%gftpdcidloopa).$network == %GFTPNet10) {
n370=        scon %gftpdcidloopa
n371=        if ($me !ison %GFTPchan1) && ($me !ison %GFTPchan2) && ($me !ison %GFTPchan3) && ($me !ison %GFTPchan4) && ($me !ison %GFTPchan5) && ($me !ison %GFTPchan6) && ($me !ison %GFTPchan7) && ($me !ison %GFTPchan8) && ($me !ison %GFTPchan9) && ($me !ison %GFTPchan10) { goto cidwhodone }
n372=        if (%GFTPnick !ison %GFTPchan1) && (%GFTPnick !ison %GFTPchan2) && (%GFTPnick !ison %GFTPchan3) && (%GFTPnick !ison %GFTPchan4) && (%GFTPnick !ison %GFTPchan5) && (%GFTPnick !ison %GFTPchan6) && (%GFTPnick !ison %GFTPchan7) && (%GFTPnick !ison %GFTPchan8) && (%GFTPnick !ison %GFTPchan9) && (%GFTPnick !ison %GFTPchan10) { 
n373=          GFTPDlog $chr(91)  $+ %GFTPInfoColor mIRC's Internal Address List is not updated, perform a Status Update in @GuildFTPD $chr(93)
n374=          goto cidwhodone
n375=        }
n376=      }
n377=      inc %gftpdcidloopa
n378=    }
n379=  }
n380=  :cidwhodone
n381=  unset %gftpdcidloopa %gftpdcidnuma
n382=  if (%GFTPWhoFull == 1) && (%GFTPBanNotOnChan == 1) && (%GFTPExemptEnable == 0) && (%GFTPuserexempt == 1) {
n383=    set %gftpcidban 0
n384=    set %gftpdcidloopa 1
n385=    set %gftpdcidnuma $scon(0)   
n386=    while (%gftpdcidloopa <= %gftpdcidnuma) {
n387=      if ($scon(%gftpdcidloopa).$network == %GFTPNet1) || ($scon(%gftpdcidloopa).$network == %GFTPNet2) || ($scon(%gftpdcidloopa).$network == %GFTPNet3) || ($scon(%gftpdcidloopa).$network == %GFTPNet4) || ($scon(%gftpdcidloopa).$network == %GFTPNet5) || ($scon(%gftpdcidloopa).$network == %GFTPNet6) || ($scon(%gftpdcidloopa).$network == %GFTPNet7) || ($scon(%gftpdcidloopa).$network == %GFTPNet8) || ($scon(%gftpdcidloopa).$network == %GFTPNet9) || ($scon(%gftpdcidloopa).$network == %GFTPNet10) {
n388=        scon %gftpdcidloopa
n389=        if ($me !ison %GFTPchan1) && ($me !ison %GFTPchan2) && ($me !ison %GFTPchan3) && ($me !ison %GFTPchan4) && ($me !ison %GFTPchan5) && ($me !ison %GFTPchan6) && ($me !ison %GFTPchan7) && ($me !ison %GFTPchan8) && ($me !ison %GFTPchan9) && ($me !ison %GFTPchan10) { goto cidkbdone }
n390=        if ($GFTPDnickmode(%GFTPnick,%GFTPchan1,%GFTPVoicedOnChan) == 0) && ($GFTPDnickmode(%GFTPnick,%GFTPchan2,%GFTPVoicedOnChan) == 0) && ($GFTPDnickmode(%GFTPnick,%GFTPchan3,%GFTPVoicedOnChan) == 0) && ($GFTPDnickmode(%GFTPnick,%GFTPchan4,%GFTPVoicedOnChan) == 0) && ($GFTPDnickmode(%GFTPnick,%GFTPchan5,%GFTPVoicedOnChan) == 0) && ($GFTPDnickmode(%GFTPnick,%GFTPchan6,%GFTPVoicedOnChan) == 0) && ($GFTPDnickmode(%GFTPnick,%GFTPchan7,%GFTPVoicedOnChan) == 0) && ($GFTPDnickmode(%GFTPnick,%GFTPchan8,%GFTPVoicedOnChan) == 0) && ($GFTPDnickmode(%GFTPnick,%GFTPchan9,%GFTPVoicedOnChan) == 0) && ($GFTPDnickmode(%GFTPnick,%GFTPchan10,%GFTPVoicedOnChan) == 0) {
n391=          inc %gftpcidban
n392=        }
n393=      }
n394=      inc %gftpdcidloopa
n395=    }
n396=    if (%gftpcidban >= $calc(%gftpdcidloopa - 1)) {
n397=      if (%GFTPVoicedOnChan == !ison) { GFTPDlog $chr(91) $+  $+ %GFTPNickColor %GFTPnick Is Being $+ %GFTPInfoColor Banned for $+ %GFTPInfoColor %GFTPNotOnChanBanDur (min) for not being on $+ %GFTPInfoColor Any Monitored Channels  $+ $chr(93) }
n398=      elseif (%GFTPVoicedOnChan == !isvoice) { GFTPDlog $chr(91) $+  $+ %GFTPNickColor %GFTPnick Is Being $+ %GFTPInfoColor Banned for $+ %GFTPInfoColor %GFTPNotOnChanBanDur (min) for not being VOICED on $+ %GFTPInfoColor Any Monitored Channels  $+ $chr(93) }
n399=      dde %GFTPDddename kickuser "" $1 You have been kicked for not being in any monitered channels
n400=      dde %GFTPDddename banuser "" $1 %GFTPNotOnChanBanDur
n401=    }
n402=    unset %gftpdcidloopa %gftpdcidnuma %gftpcidban
n403=  }
n404=  if (%GFTPWhoFull == 1) && (%GFTPBanNotOnChan == 0) && (%GFTPExemptEnable == 0) && (%GFTPKickNotOnChan == 1) && (%GFTPuserexempt == 1) {
n405=    set %gftpcidkick 0
n406=    set %gftpdcidloopa 1
n407=    set %gftpdcidnuma $scon(0)   
n408=    while (%gftpdcidloopa <= %gftpdcidnuma) {
n409=      if ($scon(%gftpdcidloopa).$network == %GFTPNet1) || ($scon(%gftpdcidloopa).$network == %GFTPNet2) || ($scon(%gftpdcidloopa).$network == %GFTPNet3) || ($scon(%gftpdcidloopa).$network == %GFTPNet4) || ($scon(%gftpdcidloopa).$network == %GFTPNet5) || ($scon(%gftpdcidloopa).$network == %GFTPNet6) || ($scon(%gftpdcidloopa).$network == %GFTPNet7) || ($scon(%gftpdcidloopa).$network == %GFTPNet8) || ($scon(%gftpdcidloopa).$network == %GFTPNet9) || ($scon(%gftpdcidloopa).$network == %GFTPNet10) {
n410=        scon %gftpdcidloopa
n411=        if ($me !ison %GFTPchan1) && ($me !ison %GFTPchan2) && ($me !ison %GFTPchan3) && ($me !ison %GFTPchan4) && ($me !ison %GFTPchan5) && ($me !ison %GFTPchan6) && ($me !ison %GFTPchan7) && ($me !ison %GFTPchan8) && ($me !ison %GFTPchan9) && ($me !ison %GFTPchan10) { goto cidkbdone }
n412=        if ($GFTPDnickmode(%GFTPnick,%GFTPchan1,%GFTPVoicedOnChan) == 0) && ($GFTPDnickmode(%GFTPnick,%GFTPchan2,%GFTPVoicedOnChan) == 0) && ($GFTPDnickmode(%GFTPnick,%GFTPchan3,%GFTPVoicedOnChan) == 0) && ($GFTPDnickmode(%GFTPnick,%GFTPchan4,%GFTPVoicedOnChan) == 0) && ($GFTPDnickmode(%GFTPnick,%GFTPchan5,%GFTPVoicedOnChan) == 0) && ($GFTPDnickmode(%GFTPnick,%GFTPchan6,%GFTPVoicedOnChan) == 0) && ($GFTPDnickmode(%GFTPnick,%GFTPchan7,%GFTPVoicedOnChan) == 0) && ($GFTPDnickmode(%GFTPnick,%GFTPchan8,%GFTPVoicedOnChan) == 0) && ($GFTPDnickmode(%GFTPnick,%GFTPchan9,%GFTPVoicedOnChan) == 0) && ($GFTPDnickmode(%GFTPnick,%GFTPchan10,%GFTPVoicedOnChan) == 0) {
n413=          inc %gftpcidkick
n414=        }
n415=      }
n416=      inc %gftpdcidloopa
n417=    }
n418=    if (%gftpcidkick >= $calc(%gftpdcidloopa - 1)) {
n419=      if (%GFTPVoicedOnChan == !ison) { GFTPDlog $chr(91) $+  $+ %GFTPNickColor %GFTPnick Has Been $+ %GFTPInfoColor Kicked For Not Being On $+ %GFTPInfoColor Any Monitored Channels  $+ $chr(93) }
n420=      elseif (%GFTPVoicedOnChan == !isvoice) { GFTPDlog $chr(91) $+  $+ %GFTPNickColor %GFTPnick Has Been $+ %GFTPInfoColor Kicked For Not Being VOICED On $+ %GFTPInfoColor Any Monitored Channels  $+ $chr(93) }
n421=      dde %GFTPDddename kickuser "" $1 You have been kicked for not being in any monitered channels
n422=    }
n423=    unset %gftpdcidloopa %gftpdcidnuma %gftpcidkick
n424=  } 
n425=  :cidkbdone
n426=  unset %GFTPWhoFull
n427=  unset %GFTPExemptEnable
n428=  unset %GFTPuserexempt
n429=  unset %GFTPKickNotOnChan
n430=  unset %GFTPVoicedOnChan
n431=  unset %GFTPNotOnChanBanDur
n432=  unset %GFTPBanNotOnChan
n433=  unset %GFTPInfoColor
n434=  unset %GFTPNickColor
n435=  unset %GFTPChan*
n436=  unset %GFTPNet*
n437=  unset %GFTPip
n438=  unset %GFTPnick
n439=  unset %GFTPhost
n440=}
n441=
n442=GFTPDlogon {
n443=  ;$1= LOGIN - $2= IP - $3= HOST - $4= ConnsToAcct - $5= IPConnsToAcct - $6= maxConnsToAcct - $7= maxIPConnsToAcct
n444=  GFTPDnotexempt $1
n445=  GFTPDreadusers kick $2
n446=  set %GFTPhost *!*@ $+ $3
n447=  set %GFTPip *!*@ $+ $2
n448=  %GFTPInfoColor = $readini Gftpd/Gftpd.ini GFTPDColorDlg InfoColor
n449=  %GFTPNickColor = $readini Gftpd/Gftpd.ini GFTPDColorDlg NickColor
n450=  %GFTPChan1 = $GFTPDncsplit(chan,$readini(Gftpd/Gftpd.ini,GFTPDDlg,Chan1))
n451=  %GFTPChan2 = $GFTPDncsplit(chan,$readini(Gftpd/Gftpd.ini,GFTPDDlg,Chan2))
n452=  %GFTPChan3 = $GFTPDncsplit(chan,$readini(Gftpd/Gftpd.ini,GFTPDDlg,Chan3))
n453=  %GFTPChan4 = $GFTPDncsplit(chan,$readini(Gftpd/Gftpd.ini,GFTPDDlg,Chan4))
n454=  %GFTPChan5 = $GFTPDncsplit(chan,$readini(Gftpd/Gftpd.ini,GFTPDDlg,Chan5))
n455=  %GFTPChan6 = $GFTPDncsplit(chan,$readini(Gftpd/Gftpd.ini,GFTPDDlg,Chan6))
n456=  %GFTPChan7 = $GFTPDncsplit(chan,$readini(Gftpd/Gftpd.ini,GFTPDDlg,Chan7))
n457=  %GFTPChan8 = $GFTPDncsplit(chan,$readini(Gftpd/Gftpd.ini,GFTPDDlg,Chan8))
n458=  %GFTPChan9 = $GFTPDncsplit(chan,$readini(Gftpd/Gftpd.ini,GFTPDDlg,Chan9))
n459=  %GFTPChan10 = $GFTPDncsplit(chan,$readini(Gftpd/Gftpd.ini,GFTPDDlg,Chan10))
n460=  %GFTPNet1 = $GFTPDncsplit(net,$readini(Gftpd/Gftpd.ini,GFTPDDlg,Chan1))
n461=  %GFTPNet2 = $GFTPDncsplit(net,$readini(Gftpd/Gftpd.ini,GFTPDDlg,Chan2))
n462=  %GFTPNet3 = $GFTPDncsplit(net,$readini(Gftpd/Gftpd.ini,GFTPDDlg,Chan3))
n463=  %GFTPNet4 = $GFTPDncsplit(net,$readini(Gftpd/Gftpd.ini,GFTPDDlg,Chan4))
n464=  %GFTPNet5 = $GFTPDncsplit(net,$readini(Gftpd/Gftpd.ini,GFTPDDlg,Chan5))
n465=  %GFTPNet6 = $GFTPDncsplit(net,$readini(Gftpd/Gftpd.ini,GFTPDDlg,Chan6))
n466=  %GFTPNet7 = $GFTPDncsplit(net,$readini(Gftpd/Gftpd.ini,GFTPDDlg,Chan7))
n467=  %GFTPNet8 = $GFTPDncsplit(net,$readini(Gftpd/Gftpd.ini,GFTPDDlg,Chan8))
n468=  %GFTPNet9 = $GFTPDncsplit(net,$readini(Gftpd/Gftpd.ini,GFTPDDlg,Chan9))
n469=  %GFTPNet10 = $GFTPDncsplit(net,$readini(Gftpd/Gftpd.ini,GFTPDDlg,Chan10))
n470=  %GFTPKickNotOnChan = $readini Gftpd/Gftpd.ini GFTPDDlg KickNotOnChan
n471=  if ($readini Gftpd/Gftpd.ini GFTPDDlg VoicedOnChan == 0) { %GFTPVoicedOnChan = !ison }
n472=  elseif ($readini Gftpd/Gftpd.ini GFTPDDlg VoicedOnChan == 1) { %GFTPVoicedOnChan = !isvoice }
n473=  %GFTPBanNotOnChan = $readini Gftpd/Gftpd.ini GFTPDDlg BanNotOnChan
n474=  %GFTPNotOnChanBanDur = $readini Gftpd/Gftpd.ini GFTPDDlg NotOnChanBanDur
n475=  %GFTPConnsList = $readini Gftpd/Gftpd.ini GFTPDDlg ConnsList
n476=  %GFTPMaxConnsList = $readini Gftpd/Gftpd.ini GFTPDDlg MaxConnsList
n477=  if ($istok(%GFTPConnsList,$1,32)) { %GFTPConnsList = $puttok(%GFTPConnsList,$4,$calc($findtok(%GFTPConnsList,$1,1,32) + 1),32)) }
n478=  else { %GFTPConnsList = %GFTPConnsList $1 $4 }
n479=  writeini Gftpd/Gftpd.ini GFTPDDlg ConnsList %GFTPConnsList
n480=  if ($istok(%GFTPMaxConnsList,$1,32)) { %GFTPMaxConnsList = $puttok(%GFTPMaxConnsList,$6,$calc($findtok(%GFTPMaxConnsList,$1,1,32) + 1),32)) }
n481=  else { %GFTPMaxConnsList = %GFTPMaxConnsList $1 $6 }
n482=  writeini Gftpd/Gftpd.ini GFTPDDlg MaxConnsList %GFTPMaxConnsList
n483=  set %gftpdcidloopa 1
n484=  set %gftpdcidnuma $scon(0)   
n485=  while (%gftpdcidloopa <= %gftpdcidnuma) {
n486=    if ($scon(%gftpdcidloopa).$network == %GFTPNet1) || ($scon(%gftpdcidloopa).$network == %GFTPNet2) || ($scon(%gftpdcidloopa).$network == %GFTPNet3) || ($scon(%gftpdcidloopa).$network == %GFTPNet4) || ($scon(%gftpdcidloopa).$network == %GFTPNet5) || ($scon(%gftpdcidloopa).$network == %GFTPNet6) || ($scon(%gftpdcidloopa).$network == %GFTPNet7) || ($scon(%gftpdcidloopa).$network == %GFTPNet8) || ($scon(%gftpdcidloopa).$network == %GFTPNet9) || ($scon(%gftpdcidloopa).$network == %GFTPNet10) {
n487=      scon %gftpdcidloopa
n488=      if (. !isin %GFTPhost) { set %GFTPnick $ial(%GFTPip,1).nick }
n489=      else { 
n490=        set %GFTPnick $ial(%GFTPhost,1).nick
n491=        if ($ial(%GFTPip,0) != 0) { set %GFTPnick $ial(%GFTPip,1).nick }
n492=      }
n493=      if (%GFTPnick == $null) { set %GFTPnick $2 }
n494=      if (. !isin %GFTPnick) { goto cidnickdone }
n495=    }
n496=    inc %gftpdcidloopa
n497=  }
n498=  :cidnickdone
n499=  set %gftpdcidloopa 1
n500=  set %gftpdcidnuma $scon(0)   
n501=  while (%gftpdcidloopa <= %gftpdcidnuma) {
n502=    if ($scon(%gftpdcidloopa).$network == %GFTPNet1) || ($scon(%gftpdcidloopa).$network == %GFTPNet2) || ($scon(%gftpdcidloopa).$network == %GFTPNet3) || ($scon(%gftpdcidloopa).$network == %GFTPNet4) || ($scon(%gftpdcidloopa).$network == %GFTPNet5) || ($scon(%gftpdcidloopa).$network == %GFTPNet6) || ($scon(%gftpdcidloopa).$network == %GFTPNet7) || ($scon(%gftpdcidloopa).$network == %GFTPNet8) || ($scon(%gftpdcidloopa).$network == %GFTPNet9) || ($scon(%gftpdcidloopa).$network == %GFTPNet10) {
n503=      scon %gftpdcidloopa
n504=      if ($ialchan(*,%GFTPchan1,0) != $nick(%GFTPchan1,0)) { set %GFTPWhoFull 0 }
n505=      elseif ($ialchan(*,%GFTPchan2,0) != $nick(%GFTPchan2,0)) { set %GFTPWhoFull 0 }
n506=      elseif ($ialchan(*,%GFTPchan3,0) != $nick(%GFTPchan3,0)) { set %GFTPWhoFull 0 }
n507=      elseif ($ialchan(*,%GFTPchan4,0) != $nick(%GFTPchan4,0)) { set %GFTPWhoFull 0 }
n508=      elseif ($ialchan(*,%GFTPchan5,0) != $nick(%GFTPchan5,0)) { set %GFTPWhoFull 0 }
n509=      elseif ($ialchan(*,%GFTPchan6,0) != $nick(%GFTPchan6,0)) { set %GFTPWhoFull 0 }
n510=      elseif ($ialchan(*,%GFTPchan7,0) != $nick(%GFTPchan7,0)) { set %GFTPWhoFull 0 }
n511=      elseif ($ialchan(*,%GFTPchan8,0) != $nick(%GFTPchan8,0)) { set %GFTPWhoFull 0 }
n512=      elseif ($ialchan(*,%GFTPchan9,0) != $nick(%GFTPchan9,0)) { set %GFTPWhoFull 0 }
n513=      elseif ($ialchan(*,%GFTPchan10,0) != $nick(%GFTPchan10,0)) { set %GFTPWhoFull 0 }
n514=      else {
n515=        set %GFTPWhoFull 1
n516=        goto ciddone
n517=      }
n518=    }
n519=    inc %gftpdcidloopa
n520=  }
n521=  :ciddone
n522=  unset %gftpdcidloopa %gftpdcidnuma
n523=  if (%GFTPnick == $null) { set %GFTPnick $2 }
n524=  GFTPDlog $chr(91) $+  $+ %GFTPNickColor %GFTPnick  $+ %GFTPInfoColor $+ is on $+ %GFTPInfoColor $1 Account $chr(93) $+ $chr(91) $+  $+ %GFTPNickColor %GFTPnick Has Logged In $+ %GFTPInfoColor $5 Time(s) $chr(93) $+ $chr(91) Account Total: $+ %GFTPInfoColor $4 $+ / $+ $6  $+ $chr(93)
n525=  if (. !isin %GFTPnick) { dde %GFTPDddename setnick "" $2 %GFTPnick }
n526=  aline -ln @GuildFTPD %GFTPnick $1 $2 | guildip $1-
n527=  if (%GFTPWhoFull == 0) {
n528=    set %gftpdcidloopa 1
n529=    set %gftpdcidnuma $scon(0)   
n530=    while (%gftpdcidloopa <= %gftpdcidnuma) {
n531=      if ($scon(%gftpdcidloopa).$network == %GFTPNet1) || ($scon(%gftpdcidloopa).$network == %GFTPNet2) || ($scon(%gftpdcidloopa).$network == %GFTPNet3) || ($scon(%gftpdcidloopa).$network == %GFTPNet4) || ($scon(%gftpdcidloopa).$network == %GFTPNet5) || ($scon(%gftpdcidloopa).$network == %GFTPNet6) || ($scon(%gftpdcidloopa).$network == %GFTPNet7) || ($scon(%gftpdcidloopa).$network == %GFTPNet8) || ($scon(%gftpdcidloopa).$network == %GFTPNet9) || ($scon(%gftpdcidloopa).$network == %GFTPNet10) {
n532=        scon %gftpdcidloopa
n533=        if ($me !ison %GFTPchan1) && ($me !ison %GFTPchan2) && ($me !ison %GFTPchan3) && ($me !ison %GFTPchan4) && ($me !ison %GFTPchan5) && ($me !ison %GFTPchan6) && ($me !ison %GFTPchan7) && ($me !ison %GFTPchan8) && ($me !ison %GFTPchan9) && ($me !ison %GFTPchan10) { goto cidwhodone }
n534=        if (%GFTPnick !ison %GFTPchan1) && (%GFTPnick !ison %GFTPchan2) && (%GFTPnick !ison %GFTPchan3) && (%GFTPnick !ison %GFTPchan4) && (%GFTPnick !ison %GFTPchan5) && (%GFTPnick !ison %GFTPchan6) && (%GFTPnick !ison %GFTPchan7) && (%GFTPnick !ison %GFTPchan8) && (%GFTPnick !ison %GFTPchan9) && (%GFTPnick !ison %GFTPchan10) { 
n535=          GFTPDlog $chr(91)  $+ %GFTPInfoColor mIRC's Internal Address List is not updated, perform a Status Update in @GuildFTPD $chr(93)
n536=          goto cidwhodone
n537=        }
n538=      }
n539=      inc %gftpdcidloopa
n540=    }
n541=  }
n542=  :cidwhodone
n543=  unset %gftpdcidloopa %gftpdcidnuma
n544=  if (%GFTPWhoFull == 1) && (%GFTPBanNotOnChan == 1) && (%GFTPisexempt == 1) && (%GFTPuserexempt == 1) {
n545=    set %gftpcidban 0
n546=    set %gftpdcidloopa 1
n547=    set %gftpdcidnuma $scon(0)   
n548=    while (%gftpdcidloopa <= %gftpdcidnuma) {
n549=      if ($scon(%gftpdcidloopa).$network == %GFTPNet1) || ($scon(%gftpdcidloopa).$network == %GFTPNet2) || ($scon(%gftpdcidloopa).$network == %GFTPNet3) || ($scon(%gftpdcidloopa).$network == %GFTPNet4) || ($scon(%gftpdcidloopa).$network == %GFTPNet5) || ($scon(%gftpdcidloopa).$network == %GFTPNet6) || ($scon(%gftpdcidloopa).$network == %GFTPNet7) || ($scon(%gftpdcidloopa).$network == %GFTPNet8) || ($scon(%gftpdcidloopa).$network == %GFTPNet9) || ($scon(%gftpdcidloopa).$network == %GFTPNet10) {
n550=        scon %gftpdcidloopa
n551=        if ($me !ison %GFTPchan1) && ($me !ison %GFTPchan2) && ($me !ison %GFTPchan3) && ($me !ison %GFTPchan4) && ($me !ison %GFTPchan5) && ($me !ison %GFTPchan6) && ($me !ison %GFTPchan7) && ($me !ison %GFTPchan8) && ($me !ison %GFTPchan9) && ($me !ison %GFTPchan10) { goto cidkbdone }
n552=        if ($GFTPDnickmode(%GFTPnick,%GFTPchan1,%GFTPVoicedOnChan) == 0) && ($GFTPDnickmode(%GFTPnick,%GFTPchan2,%GFTPVoicedOnChan) == 0) && ($GFTPDnickmode(%GFTPnick,%GFTPchan3,%GFTPVoicedOnChan) == 0) && ($GFTPDnickmode(%GFTPnick,%GFTPchan4,%GFTPVoicedOnChan) == 0) && ($GFTPDnickmode(%GFTPnick,%GFTPchan5,%GFTPVoicedOnChan) == 0) && ($GFTPDnickmode(%GFTPnick,%GFTPchan6,%GFTPVoicedOnChan) == 0) && ($GFTPDnickmode(%GFTPnick,%GFTPchan7,%GFTPVoicedOnChan) == 0) && ($GFTPDnickmode(%GFTPnick,%GFTPchan8,%GFTPVoicedOnChan) == 0) && ($GFTPDnickmode(%GFTPnick,%GFTPchan9,%GFTPVoicedOnChan) == 0) && ($GFTPDnickmode(%GFTPnick,%GFTPchan10,%GFTPVoicedOnChan) == 0) {
n553=          inc %gftpcidban
n554=        }
n555=      }
n556=      inc %gftpdcidloopa
n557=    }
n558=    if (%gftpcidban >= $calc(%gftpdcidloopa - 1)) {
n559=      if (%GFTPVoicedOnChan == !ison) { GFTPDlog $chr(91) $+  $+ %GFTPNickColor %GFTPnick Is Being $+ %GFTPInfoColor Banned for $+ %GFTPInfoColor %GFTPNotOnChanBanDur (min) for not being on $+ %GFTPInfoColor Any Monitored Channels  $+ $chr(93) }
n560=      elseif (%GFTPVoicedOnChan == !isvoice) { GFTPDlog $chr(91) $+  $+ %GFTPNickColor %GFTPnick Is Being $+ %GFTPInfoColor Banned for $+ %GFTPInfoColor %GFTPNotOnChanBanDur (min) for not being VOICED on $+ %GFTPInfoColor Any Monitored Channels  $+ $chr(93) }
n561=      dde %GFTPDddename kickuser "" $2 You have been kicked for not being in any monitered channels
n562=      dde %GFTPDddename banuser "" $2 %GFTPNotOnChanBanDur
n563=    }
n564=    unset %gftpdcidloopa %gftpdcidnuma %gftpcidban
n565=  }
n566=  if (%GFTPWhoFull == 1) && (%GFTPBanNotOnChan == 0) && (%GFTPisexempt == 1) && (%GFTPKickNotOnChan == 1) && (%GFTPuserexempt == 1) {
n567=    set %gftpcidkick 0
n568=    set %gftpdcidloopa 1
n569=    set %gftpdcidnuma $scon(0)   
n570=    while (%gftpdcidloopa <= %gftpdcidnuma) {
n571=      if ($scon(%gftpdcidloopa).$network == %GFTPNet1) || ($scon(%gftpdcidloopa).$network == %GFTPNet2) || ($scon(%gftpdcidloopa).$network == %GFTPNet3) || ($scon(%gftpdcidloopa).$network == %GFTPNet4) || ($scon(%gftpdcidloopa).$network == %GFTPNet5) || ($scon(%gftpdcidloopa).$network == %GFTPNet6) || ($scon(%gftpdcidloopa).$network == %GFTPNet7) || ($scon(%gftpdcidloopa).$network == %GFTPNet8) || ($scon(%gftpdcidloopa).$network == %GFTPNet9) || ($scon(%gftpdcidloopa).$network == %GFTPNet10) {
n572=        scon %gftpdcidloopa
n573=        if ($me !ison %GFTPchan1) && ($me !ison %GFTPchan2) && ($me !ison %GFTPchan3) && ($me !ison %GFTPchan4) && ($me !ison %GFTPchan5) && ($me !ison %GFTPchan6) && ($me !ison %GFTPchan7) && ($me !ison %GFTPchan8) && ($me !ison %GFTPchan9) && ($me !ison %GFTPchan10) { goto cidkbdone }
n574=        if ($GFTPDnickmode(%GFTPnick,%GFTPchan1,%GFTPVoicedOnChan) == 0) && ($GFTPDnickmode(%GFTPnick,%GFTPchan2,%GFTPVoicedOnChan) == 0) && ($GFTPDnickmode(%GFTPnick,%GFTPchan3,%GFTPVoicedOnChan) == 0) && ($GFTPDnickmode(%GFTPnick,%GFTPchan4,%GFTPVoicedOnChan) == 0) && ($GFTPDnickmode(%GFTPnick,%GFTPchan5,%GFTPVoicedOnChan) == 0) && ($GFTPDnickmode(%GFTPnick,%GFTPchan6,%GFTPVoicedOnChan) == 0) && ($GFTPDnickmode(%GFTPnick,%GFTPchan7,%GFTPVoicedOnChan) == 0) && ($GFTPDnickmode(%GFTPnick,%GFTPchan8,%GFTPVoicedOnChan) == 0) && ($GFTPDnickmode(%GFTPnick,%GFTPchan9,%GFTPVoicedOnChan) == 0) && ($GFTPDnickmode(%GFTPnick,%GFTPchan10,%GFTPVoicedOnChan) == 0) {
n575=          inc %gftpcidkick
n576=        }
n577=      }
n578=      inc %gftpdcidloopa
n579=    }
n580=    if (%gftpcidkick >= $calc(%gftpdcidloopa - 1)) {
n581=      if (%GFTPVoicedOnChan == !ison) { GFTPDlog $chr(91) $+  $+ %GFTPNickColor %GFTPnick Has Been $+ %GFTPInfoColor Kicked For Not Being On $+ %GFTPInfoColor Any Monitored Channels  $+ $chr(93) }
n582=      elseif (%GFTPVoicedOnChan == !isvoice) { GFTPDlog $chr(91) $+  $+ %GFTPNickColor %GFTPnick Has Been $+ %GFTPInfoColor Kicked For Not Being VOICED On $+ %GFTPInfoColor Any Monitored Channels  $+ $chr(93) }
n583=      dde %GFTPDddename kickuser "" $2 You have been kicked for not being in any monitered channels
n584=    }
n585=    unset %gftpdcidloopa %gftpdcidnuma %gftpcidkick
n586=  } 
n587=  :cidkbdone
n588=  unset %GFTPMaxConnsList
n589=  unset %GFTPConnsList
n590=  unset %GFTPWhoFull
n591=  unset %GFTPuserexempt
n592=  unset %GFTPisexempt
n593=  unset %GFTPKickNotOnChan
n594=  unset %GFTPVoicedOnChan
n595=  unset %GFTPNotOnChanBanDur
n596=  unset %GFTPBanNotOnChan
n597=  unset %GFTPInfoColor
n598=  unset %GFTPNickColor
n599=  unset %GFTPChan*
n600=  unset %GFTPNet*
n601=  unset %GFTPip
n602=  unset %GFTPnick
n603=  unset %GFTPhost
n604=}
n605=
n606=GFTPDnotexempt {
n607=  if ($readini Gftpd/Gftpd.ini GFTPDDlg ExemptEnable == 0) { set %GFTPisexempt 1 | goto doneexemptcheck }
n608=  %GFTPNotExemptList = $readini Gftpd/Gftpd.ini GFTPDDlg NotExemptList
n609=  %GFTPcntr = 1
n610=  :checkexempt
n611=  if ($gettok(%GFTPNotExemptList, %GFTPcntr, 32) == $1) { set %GFTPisexempt 1 | goto doneexemptcheck }
n612=  inc %GFTPcntr
n613=  if (%GFTPcntr <= $numtok(%GFTPNotExemptList, 32)) { goto checkexempt }
n614=  set %GFTPisexempt 0 
n615=  :doneexemptcheck
n616=  unset %GFTPNotExemptList
n617=  unset %GFTPcntr
n618=}
n619=
n620=GFTPDLogoff {
n621=  ;$1= ACCTNAME - $2=IPADDR - $3=HOSTNAME - $4= numberOfConnToAcct - $5= maxNumberOfConnToAcct 
n622=  if ($4 < 0) { set %GFTPDconns 0 }
n623=  else set %GFTPDconns $4
n624=  if ($5 < 0) { set %GFTPDmaxconns 0 }
n625=  else set %GFTPDmaxconns $5
n626=  set %GFTPhost *!*@ $+ $3
n627=  set %GFTPip *!*@ $+ $2
n628=  %GFTPInfoColor = $readini Gftpd/Gftpd.ini GFTPDColorDlg InfoColor
n629=  %GFTPNickColor = $readini Gftpd/Gftpd.ini GFTPDColorDlg NickColor
n630=  %GFTPConnsList = $readini Gftpd/Gftpd.ini GFTPDDlg ConnsList
n631=  %GFTPMaxConnsList = $readini Gftpd/Gftpd.ini GFTPDDlg MaxConnsList
n632=  if ($istok(%GFTPConnsList,$1,32)) { %GFTPConnsList = $puttok(%GFTPConnsList,$4,$calc($findtok(%GFTPConnsList,$1,1,32) + 1),32)) }
n633=  else { %GFTPConnsList = %GFTPConnsList $1 $4 }
n634=  writeini Gftpd/Gftpd.ini GFTPDDlg ConnsList %GFTPConnsList
n635=  if ($istok(%GFTPMaxConnsList,$1,32)) { %GFTPMaxConnsList = $puttok(%GFTPMaxConnsList,$5,$calc($findtok(%GFTPMaxConnsList,$1,1,32) + 1),32)) }
n636=  else { %GFTPMaxConnsList = %GFTPMaxConnsList $1 $5 }
n637=  writeini Gftpd/Gftpd.ini GFTPDDlg MaxConnsList %GFTPMaxConnsList
n638=  if (. !isin %GFTPhost) { set %GFTPnick $ial(%GFTPip,1).nick }
n639=  else { set %GFTPnick $ial(%GFTPhost,1).nick }  
n640=  if (%GFTPnick == $null) { set %GFTPnick $2 }
n641=  GFTPDlog $chr(91) $+  $+ %GFTPNickColor %GFTPnick Has $+ %GFTPInfoColor Logged Off $chr(93) $+ $chr(91) Account Total for $+ %GFTPInfoColor $1 is now: $+ %GFTPInfoColor %GFTPDconns $+ / $+ %GFTPDmaxconns  $chr(93)
n642=  if ($GFTPDgetline(@GuildFTPD,%GFTPnick,1) != $null) { dline -l @GuildFTPD $GFTPDgetline(@GuildFTPD,%GFTPnick,1) $1 $2 }
n643=  write -ds $+ $2 gftpd\stats.txt
n644=  write -ds $+ $2 gftpd\stats.txt
n645=  write -ds $+ $2 gftpd\stats.txt
n646=  unset %GFTPDconns
n647=  unset %GFTPDmaxconns
n648=  unset %GFTPMaxConnsList
n649=  unset %GFTPConnsList
n650=  unset %GFTPcntr
n651=  unset %GFTPInfoColor
n652=  unset %GFTPNickColor
n653=  unset %GFTPip
n654=  unset %GFTPnick
n655=  unset %GFTPhost
n656=  GFTPDStatusUpdate
n657=}
n658=
n659=GFTPDUpdate { 
n660=  ; $1= PORTNO - $2= TOTALCONNS - $3= STATUS
n661=  if ($server == $null) { return }
n662=  %GFTPChan1 = $GFTPDncsplit(chan,$readini(Gftpd/Gftpd.ini,GFTPDDlg,Chan1))
n663=  %GFTPChan2 = $GFTPDncsplit(chan,$readini(Gftpd/Gftpd.ini,GFTPDDlg,Chan2))
n664=  %GFTPChan3 = $GFTPDncsplit(chan,$readini(Gftpd/Gftpd.ini,GFTPDDlg,Chan3))
n665=  %GFTPChan4 = $GFTPDncsplit(chan,$readini(Gftpd/Gftpd.ini,GFTPDDlg,Chan4))
n666=  %GFTPChan5 = $GFTPDncsplit(chan,$readini(Gftpd/Gftpd.ini,GFTPDDlg,Chan5))
n667=  %GFTPChan6 = $GFTPDncsplit(chan,$readini(Gftpd/Gftpd.ini,GFTPDDlg,Chan6))
n668=  %GFTPChan7 = $GFTPDncsplit(chan,$readini(Gftpd/Gftpd.ini,GFTPDDlg,Chan7))
n669=  %GFTPChan8 = $GFTPDncsplit(chan,$readini(Gftpd/Gftpd.ini,GFTPDDlg,Chan8))
n670=  %GFTPChan9 = $GFTPDncsplit(chan,$readini(Gftpd/Gftpd.ini,GFTPDDlg,Chan9))
n671=  %GFTPChan10 = $GFTPDncsplit(chan,$readini(Gftpd/Gftpd.ini,GFTPDDlg,Chan10))
n672=  %GFTPNet1 = $GFTPDncsplit(net,$readini(Gftpd/Gftpd.ini,GFTPDDlg,Chan1))
n673=  %GFTPNet2 = $GFTPDncsplit(net,$readini(Gftpd/Gftpd.ini,GFTPDDlg,Chan2))
n674=  %GFTPNet3 = $GFTPDncsplit(net,$readini(Gftpd/Gftpd.ini,GFTPDDlg,Chan3))
n675=  %GFTPNet4 = $GFTPDncsplit(net,$readini(Gftpd/Gftpd.ini,GFTPDDlg,Chan4))
n676=  %GFTPNet5 = $GFTPDncsplit(net,$readini(Gftpd/Gftpd.ini,GFTPDDlg,Chan5))
n677=  %GFTPNet6 = $GFTPDncsplit(net,$readini(Gftpd/Gftpd.ini,GFTPDDlg,Chan6))
n678=  %GFTPNet7 = $GFTPDncsplit(net,$readini(Gftpd/Gftpd.ini,GFTPDDlg,Chan7))
n679=  %GFTPNet8 = $GFTPDncsplit(net,$readini(Gftpd/Gftpd.ini,GFTPDDlg,Chan8))
n680=  %GFTPNet9 = $GFTPDncsplit(net,$readini(Gftpd/Gftpd.ini,GFTPDDlg,Chan9))
n681=  %GFTPNet10 = $GFTPDncsplit(net,$readini(Gftpd/Gftpd.ini,GFTPDDlg,Chan10))
n682=  %GFTPInfoColor = $readini Gftpd/Gftpd.ini GFTPDColorDlg InfoColor
n683=  GFTPDlog $chr(91) Status: $+ %GFTPInfoColor $3  $+ $chr(93) $+ $chr(91) Port: $+ %GFTPInfoColor $1  $+ $chr(93) $+ $chr(91) Connections: $+ %GFTPInfoColor $2  $+ $chr(93)
n684=  writeini Gftpd/Gftpd.ini GFTPDPortDlg MainPort $1 
n685=  dline -l @GuildFTPD 1-
n686=  set %gftpdcidloopa 1
n687=  set %gftpdcidnuma $scon(0)   
n688=  while (%gftpdcidloopa <= %gftpdcidnuma) {
n689=    if ($scon(%gftpdcidloopa).$network == %GFTPNet1) || ($scon(%gftpdcidloopa).$network == %GFTPNet2) || ($scon(%gftpdcidloopa).$network == %GFTPNet3) || ($scon(%gftpdcidloopa).$network == %GFTPNet4) || ($scon(%gftpdcidloopa).$network == %GFTPNet5) || ($scon(%gftpdcidloopa).$network == %GFTPNet6) || ($scon(%gftpdcidloopa).$network == %GFTPNet7) || ($scon(%gftpdcidloopa).$network == %GFTPNet8) || ($scon(%gftpdcidloopa).$network == %GFTPNet9) || ($scon(%gftpdcidloopa).$network == %GFTPNet10) {
n690=      scon %gftpdcidloopa
n691=      if ($ialchan(*,%GFTPchan1,0) != $nick(%GFTPchan1,0)) { .enable #GFTPDwho | .who %GFTPChan1 }
n692=      elseif ($ialchan(*,%GFTPchan2,0) != $nick(%GFTPchan2,0)) { .enable #GFTPDwho | .who %GFTPChan2 }
n693=      elseif ($ialchan(*,%GFTPchan3,0) != $nick(%GFTPchan3,0)) { .enable #GFTPDwho | .who %GFTPChan3 }
n694=      elseif ($ialchan(*,%GFTPchan4,0) != $nick(%GFTPchan4,0)) { .enable #GFTPDwho | .who %GFTPChan4 }
n695=      elseif ($ialchan(*,%GFTPchan5,0) != $nick(%GFTPchan5,0)) { .enable #GFTPDwho | .who %GFTPChan5 }
n696=      elseif ($ialchan(*,%GFTPchan6,0) != $nick(%GFTPchan6,0)) { .enable #GFTPDwho | .who %GFTPChan6 }
n697=      elseif ($ialchan(*,%GFTPchan7,0) != $nick(%GFTPchan7,0)) { .enable #GFTPDwho | .who %GFTPChan7 }
n698=      elseif ($ialchan(*,%GFTPchan8,0) != $nick(%GFTPchan8,0)) { .enable #GFTPDwho | .who %GFTPChan8 }
n699=      elseif ($ialchan(*,%GFTPchan9,0) != $nick(%GFTPchan9,0)) { .enable #GFTPDwho | .who %GFTPChan9 }
n700=      elseif ($ialchan(*,%GFTPchan10,0) != $nick(%GFTPchan10,0)) { .enable #GFTPDwho | .who %GFTPChan10 }
n701=    }
n702=    inc %gftpdcidloopa
n703=  }
n704=  unset %gftpdcidloopa
n705=  unset %gftpdcidnuma
n706=  unset %GFTPInfoColor
n707=  unset %GFTPTemp
n708=  unset %GFTPChan*
n709=  unset %GFTPNet*
n710=}
n711=
n712=GFTPDUnbannedIP { 
n713=  ;$1=  IPADDR - $2  HOST
n714=  %GFTPInfoColor = $readini Gftpd/Gftpd.ini GFTPDColorDlg InfoColor
n715=  %GFTPNickColor = $readini Gftpd/Gftpd.ini GFTPDColorDlg NickColor
n716=  set %GFTPhost *!*@ $+ $2
n717=  set %GFTPip *!*@ $+ $1
n718=  if (. !isin %GFTPhost) { set %GFTPnick $ial(%GFTPip,1).nick }
n719=  else { set %GFTPnick $ial(%GFTPhost,1).nick }
n720=  if (%GFTPnick == $null) { set %GFTPnick $1 }
n721=  GFTPDlog $Chr(91) $+  $+ %GFTPNickColor %GFTPnick Has Been $+ %GFTPInfoColor UnBanned $chr(93)
n722=  unset %GFTPnick
n723=  unset %GFTPip
n724=  unset %GFTPhost
n725=  unset %GFTPNickColor
n726=  unset %GFTPInfoColor
n727=}
n728=
n729=GFTPDBannedIP { 
n730=  ;$1=  IPADDR - $2  HOST
n731=  set %GFTPhost *!*@ $+ $2
n732=  set %GFTPip *!*@ $+ $1
n733=  %GFTPInfoColor = $readini Gftpd/Gftpd.ini GFTPDColorDlg InfoColor
n734=  %GFTPNickColor = $readini Gftpd/Gftpd.ini GFTPDColorDlg NickColor
n735=  if (. !isin %GFTPhost) { set %GFTPnick $ial(%GFTPip,1).nick }
n736=  else { set %GFTPnick $ial(%GFTPhost,1).nick }
n737=  if (%GFTPnick == $null) { set %GFTPnick $1 }
n738=  if ($3 == 0) { GFTPDlog $chr(91) $+  $+ %GFTPNickColor %GFTPnick Has Been $+ %GFTPInfoColor Banned Indefinitely $chr(93) }
n739=  else { GFTPDlog $chr(91) $+  $+ %GFTPNickColor %GFTPnick Has Been $+ %GFTPInfoColor Banned for $3 minutes! $chr(93) }
n740=  unset %GFTPnick
n741=  unset %GFTPip
n742=  unset %GFTPhost
n743=  unset %GFTPNickColor
n744=  unset %GFTPInfoColor
n745=}
n746=
n747=GFTPDgetline {
n748=  ;;; $1 = window name, $2 = nick $3 = number (1 = listbox 0 = mainwindow)
n749=  set %GFTPcntr 1
n750=  :getlineloop
n751=  if ($2 isin $line($1,%GFTPcntr,$3)) { return %GFTPcntr }
n752=  inc %GFTPcntr
n753=  if ($line($1,%GFTPcntr,$3) == $null) { return $null } 
n754=  if ($line($1,%GFTPcntr,$3) != $null) { goto getlineloop } 
n755=  return 1
n756=}
n757=
n758=GFTPDporthop {
n759=  %GFTPInfoColor = $readini Gftpd/Gftpd.ini GFTPDColorDlg InfoColor
n760=  %GFTPMinPort = $readini Gftpd/Gftpd.ini GFTPDPortDlg MinPort
n761=  %GFTPMaxPort = $readini Gftpd/Gftpd.ini GFTPDPortDlg MaxPort
n762=  if ($1) {
n763=    if ($portfree($1) == $false) { GFTPDlog Port  $+ %GFTPInfoColor $1 Is  $+ %GFTPInfoColor $+ Not Available, Please Use Another } 
n764=    else {
n765=      writeini Gftpd/Gftpd.ini GFTPDPortDlg MainPort $1 
n766=      dde %GFTPDddename setport "" $1 
n767=    } 
n768=  }
n769=  else {
n770=    :start
n771=    set %GFTPTemp $r(%GFTPMinPort,%GFTPMaxPort)
n772=    if ($portfree(%GFTPTemp) == $true) { dde %GFTPDddename setport "" %GFTPTemp }
n773=    else { goto start } 
n774=    writeini Gftpd/Gftpd.ini GFTPDPortDlg MainPort %GFTPTemp
n775=  }
n776=  unset %GFTPMaxPort
n777=  unset %GFTPMinPort
n778=  unset %GFTPTemp
n779=  unset %GFTPInfoColor
n780=}
n781=
n782=GFTPDportchange {
n783=  ; $1 = "system" or port in multiport configuration
n784=  %GFTPInfoColor = $readini Gftpd/Gftpd.ini GFTPDColorDlg InfoColor
n785=  %GFTPNickColor = $readini Gftpd/Gftpd.ini GFTPDColorDlg NickColor
n786=  %GFTPMultiportList = $readini Gftpd/Gftpd.ini GFTPDPortDlg MultiportList
n787=  if ($1 == system) {
n788=    GFTPDlog $chr(91) The Current System Port Is Now:  $+ %GFTPInfoColor $2  $chr(93)
n789=    writeini Gftpd/Gftpd.ini GFTPDPortDlg MainPort $2
n790=  }
n791=  else {
n792=    if ($2 != 0) { 
n793=      GFTPDlog $chr(91) Current Port For  $+ %GFTPInfoColor $1 Is Now:  $+ %GFTPInfoColor $2  $chr(93)
n794=      if ($istok(%GFTPMultiportList,$1,32)) { 
n795=        %GFTPMultiportList = $puttok(%GFTPMultiportList,$2,$calc($findtok(%GFTPMultiportList,$1,1,32) + 1),32),32) 
n796=        writeini Gftpd/Gftpd.ini GFTPDPortDlg MultiportList %GFTPMultiportList
n797=      }
n798=      else {
n799=        %GFTPMultiportList = %GFTPMultiportList $1 $2
n800=        writeini Gftpd/Gftpd.ini GFTPDPortDlg MultiportList %GFTPMultiportList
n801=      }
n802=    }
n803=    else { 
n804=      %GFTPTemp = $findtok(%GFTPMultiportList,$1,1,32)
n805=      %GFTPTemp2 = $calc(%GFTPTemp + 1)
n806=      if ($istok(%GFTPMultiportList,$1,32)) { 
n807=        %GFTPMultiportList = $deltok(%GFTPMultiportList,%GFTPTemp2,32)
n808=        %GFTPMultiportList = $deltok(%GFTPMultiportList,%GFTPTemp,32)
n809=        if %GFTPMultiportList != $null { writeini Gftpd/Gftpd.ini GFTPDPortDlg MultiportList %GFTPMultiportList }
n810=        else { remini Gftpd/Gftpd.ini GFTPDPortDlg MultiportList } 
n811=      }
n812=      GFTPDlog $chr(91) Current Port For  $+ %GFTPInfoColor $1 Is Now:  $+ %GFTPInfoColor $+ $readini Gftpd/Gftpd.ini GFTPDPortDlg MainPort  $chr(93)
n813=    }
n814=  }
n815=  unset %GFTPTemp
n816=  unset %GFTPTemp2
n817=  unset %GFTPMultiportList
n818=  unset %GFTPNickColor
n819=  unset %GFTPInfoColor
n820=}
n821=
n822=GFTPDPortUpdate {
n823=  if ($server == $null) { return }
n824=  if ($1 == System) {
n825=    writeini Gftpd/Gftpd.ini GFTPDPortDlg MainPort $2
n826=    remini Gftpd/Gftpd.ini GFTPDPortDlg MultiportList
n827=  }
n828=  else { 
n829=    %GFTPMultiportList = $readini Gftpd/Gftpd.ini GFTPDPortDlg MultiportList $1 $2 
n830=    writeini Gftpd/Gftpd.ini GFTPDPortDlg MultiportList %GFTPMultiportList
n831=    unset %GFTPMultiportList
n832=  }
n833=}
n834=
n835=GFTPDStatusUpdate { dde %GFTPDddename Update "" }
n836=
n837=GFTPDWinOpen { if ($window(@GuildFTPD) == $null) { window -l45 @GuildFTPD } }
n838=
n839=gp {
n840=  %GFTPTemp = $readini Gftpd/Gftpd.ini GFTPDPortDlg MultiportList
n841=  if ($1 != $null) && ($istok(%GFTPTemp,$1,32)) { 
n842=    return $gettok(%GFTPTemp,$calc($findtok(%GFTPTemp,$1,1,32) +1),32) 
n843=  }
n844=  else { unset %GFTPTemp | return $readini Gftpd/Gftpd.ini GFTPDPortDlg MainPort }
n845=}
n846=
n847=gc {
n848=  %GFTPTemp = $readini Gftpd/Gftpd.ini GFTPDDlg ConnsList
n849=  if ($istok(%GFTPTemp,$1,32)) { return $gettok(%GFTPTemp,$calc($findtok(%GFTPTemp,$1,1,32) +1),32) }
n850=  else { return NA }
n851=}
n852=
n853=gm {
n854=  %GFTPTemp = $readini Gftpd/Gftpd.ini GFTPDDlg MaxConnsList
n855=  if ($istok(%GFTPTemp,$1,32)) { return $gettok(%GFTPTemp,$calc($findtok(%GFTPTemp,$1,1,32) +1),32) }
n856=  else { return NA }
n857=}
n858=
n859=gt {
n860=  unset %GFTPtemp*
n861=  %GFTPTemp = $readini Gftpd/Gftpd.ini GFTPDDlg ConnsList
n862=  if ($readini Gftpd/Gftpd.ini GFTPDDlg ConnsList != $null) {
n863=    ;; ph33r :P
n864=    set %GFTPTemp $replace(%GFTPTemp,$chr(32),.)
n865=    set %GFTPnum $calc($numtok(%GFTPTemp,46) / 2)
n866=    set %GFTPcntr 2
n867=    :loop
n868=    %GFTPtemp2 = $calc(%GFTPTemp2 + $gettok(%GFTPTemp,%GFTPcntr,46))
n869=    dec %GFTPnum 1
n870=    inc %GFTPcntr 2
n871=    if (%GFTPnum <= 0) { unset %GFTPTemp | unset %GFTPnum | unset %GFTPcntr | return %GFTPtemp2 | unset %GFTPTemp2 }
n872=    else goto loop
n873=  }
n874=  else { unset %GFTPTemp* | unset %GFTPnum | unset %GFTPcntr | return NA }
n875=}
n876=
n877=gpa {
n878=  %GFTPTemp = $readini Gftpd/Gftpd.ini GFTPDDlg PasswordList
n879=  if ($istok(%GFTPTemp,$1,32)) { return $gettok(%GFTPTemp,$calc($findtok(%GFTPTemp,$1,1,32) +1),32) }
n880=  else { return NA }
n881=}
n882=
n883=gd {
n884=  unset %GFTPbTemp
n885=  set %GFTPcntr 1
n886=  :loop
n887=  if ($gettok($read(gftpd\stats.txt,%GFTPcntr),5,46) == DL) { %GFTPbTemp = $calc(%GFTPbTemp + $gettok($read(gftpd\stats.txt,%GFTPcntr),6,46)) }
n888=  if ($read(gftpd\stats.txt,%GFTPcntr) == $null) { 
n889=    if (%GFTPbTemp == $null) { unset %GFTPcntr | unset %GFTPbTemp | return 0 k/s }
n890=    else { unset %GFTPcntr | return %GFTPbTemp k/s | unset %GFTPbTemp | }
n891=  }
n892=  inc %GFTPcntr
n893=  goto loop
n894=}
n895=
n896=gu {
n897=  unset %GFTPbTemp
n898=  set %GFTPcntr 1
n899=  :loop
n900=  if ($gettok($read(gftpd\stats.txt,%GFTPcntr),5,46) == UL) { %GFTPbTemp = $calc(%GFTPbTemp + $gettok($read(gftpd\stats.txt,%GFTPcntr),6,46)) }
n901=  if ($read(gftpd\stats.txt,%GFTPcntr) == $null) { 
n902=    if (%GFTPbTemp == $null) { unset %GFTPcntr | unset %GFTPbTemp | return 0 k/s }
n903=    else { unset %GFTPcntr | return %GFTPbTemp k/s | unset %GFTPbTemp | }
n904=  }
n905=  inc %GFTPcntr
n906=  goto loop
n907=}
n908=
n909=gb { return $calc($remove($gd,k/s) + $remove($gu,k/s)) k/s }
n910=
n911=gn {
n912=  unset %GFTPTemp2
n913=  %GFTPnum = $lines(gftpd\stats.txt)
n914=  if (%GFTPnum == $null) { %GFTPnum = 0 }
n915=  %GFTPcntr = 1
n916=  :loop
n917=  %GFTPTemp = $right($read(gftpd\stats.txt,%GFTPcntr),$calc($len($read(gftpd\stats.txt,%GFTPcntr)) - $pos($read(gftpd\stats.txt,%GFTPcntr),$chr(33),1)))
n918=  if (. !isin %GFTPTemp) { %GFTPTemp2 = %GFTPTemp2 %GFTPTemp }
n919=  if (%GFTPcntr >= %GFTPnum) {
n920=    unset %GFTPTemp
n921=    unset %GFTPnum
n922=    unset %GFTPcntr
n923=    if (%GFTPTemp2 != $null) { return %GFTPTemp2 | unset %GFTPTemp2 }
n924=    else { unset %GFTPTemp2 | return NA }
n925=  }
n926=  inc %GFTPcntr
n927=  goto loop
n928=}
n929=
n930=ezdisks {
n931=  if ($disk(C) == $true) { set %moodisks [ $+ $disk(C).type disk C]: $round($calc($disk(C).size / 1024 / 1024),2) megs / $round($calc($disk(C).free / 1024 / 1024),2) megs free | set %moototal $round($calc($disk(C).free  / 1024 / 1024),2) }
n932=  if ($disk(D) == $true) { set %moodisks %moodisks [ $+ $disk(D).type disk D]: $round($calc($disk(D).size / 1024 / 1024),2) megs / $round($calc($disk(D).free / 1024 / 1024),2) megs free | set %moototal $calc(%moototal + $round($calc($disk(D).free  / 1024 / 1024),2)) }
n933=  if ($disk(E) == $true) { set %moodisks %moodisks [ $+ $disk(E).type disk E]: $round($calc($disk(E).size / 1024 / 1024),2) megs / $round($calc($disk(E).free / 1024 / 1024),2) megs free | set %moototal $calc(%moototal + $round($calc($disk(E).free  / 1024 / 1024),2)) }
n934=  if ($disk(F) == $true) { set %moodisks %moodisks [ $+ $disk(F).type disk F]: $round($calc($disk(F).size / 1024 / 1024),2) megs / $round($calc($disk(F).free / 1024 / 1024),2) megs free | set %moototal $calc(%moototal + $round($calc($disk(F).free  / 1024 / 1024),2)) }
n935=  if ($disk(G) == $true) { set %moodisks %moodisks [ $+ $disk(G).type disk G]: $round($calc($disk(G).size / 1024 / 1024),2) megs / $round($calc($disk(G).free / 1024 / 1024),2) megs free | set %moototal $calc(%moototal + $round($calc($disk(G).free  / 1024 / 1024),2)) }
n936=  if ($disk(H) == $true) { set %moodisks %moodisks [ $+ $disk(H).type disk H]: $round($calc($disk(H).size / 1024 / 1024),2) megs / $round($calc($disk(H).free / 1024 / 1024),2) megs free | set %moototal $calc(%moototal + $round($calc($disk(H).free  / 1024 / 1024),2)) }
n937=  if ($disk(I) == $true) { set %moodisks %moodisks [ $+ $disk(I).type disk I]: $round($calc($disk(I).size / 1024 / 1024),2) megs / $round($calc($disk(I).free / 1024 / 1024),2) megs free | set %moototal $calc(%moototal + $round($calc($disk(I).free  / 1024 / 1024),2)) }
n938=  if ($disk(J) == $true) { set %moodisks %moodisks [ $+ $disk(J).type disk J]: $round($calc($disk(J).size / 1024 / 1024),2) megs / $round($calc($disk(J).free / 1024 / 1024),2) megs free | set %moototal $calc(%moototal + $round($calc($disk(J).free  / 1024 / 1024),2)) }
n939=  if ($disk(K) == $true) { set %moodisks %moodisks [ $+ $disk(K).type disk K]: $round($calc($disk(K).size / 1024 / 1024),2) megs / $round($calc($disk(K).free / 1024 / 1024),2) megs free | set %moototal $calc(%moototal + $round($calc($disk(K).free  / 1024 / 1024),2)) }
n940=  if ($disk(L) == $true) { set %moodisks %moodisks [ $+ $disk(L).type disk L]: $round($calc($disk(L.size / 1024 / 1024),2) megs / $round($calc($disk(L).free / 1024 / 1024),2) megs free | set %moototal $calc(%moototal + $round($calc($disk(L).free  / 1024 / 1024),2)) }
n941=  if ($disk(M) == $true) { set %moodisks %moodisks [ $+ $disk(M).type disk M]: $round($calc($disk(M).size / 1024 / 1024),2) megs / $round($calc($disk(M).free / 1024 / 1024),2) megs free | set %moototal $calc(%moototal + $round($calc($disk(M).free  / 1024 / 1024),2)) }
n942=  if ($disk(N) == $true) { set %moodisks %moodisks [ $+ $disk(N).type disk N]: $round($calc($disk(N).size / 1024 / 1024),2) megs / $round($calc($disk(N).free / 1024 / 1024),2) megs free | set %moototal $calc(%moototal + $round($calc($disk(N).free  / 1024 / 1024),2)) }
n943=  if ($disk(O) == $true) { set %moodisks %moodisks [ $+ $disk(O).type disk O]: $round($calc($disk(O).size / 1024 / 1024),2) megs / $round($calc($disk(O).free / 1024 / 1024),2) megs free | set %moototal $calc(%moototal + $round($calc($disk(O).free  / 1024 / 1024),2)) }
n944=  if ($disk(P) == $true) { set %moodisks %moodisks [ $+ $disk(P).type disk P]: $round($calc($disk(P).size / 1024 / 1024),2) megs / $round($calc($disk(P).free / 1024 / 1024),2) megs free | set %moototal $calc(%moototal + $round($calc($disk(P).free  / 1024 / 1024),2)) }
n945=  if ($disk(Q) == $true) { set %moodisks %moodisks [ $+ $disk(Q).type disk Q]: $round($calc($disk(Q).size / 1024 / 1024),2) megs / $round($calc($disk(Q).free / 1024 / 1024),2) megs free | set %moototal $calc(%moototal + $round($calc($disk(Q).free  / 1024 / 1024),2)) }
n946=  if ($disk(R) == $true) { set %moodisks %moodisks [ $+ $disk(R).type disk R]: $round($calc($disk(R).size / 1024 / 1024),2) megs / $round($calc($disk(R).free / 1024 / 1024),2) megs free | set %moototal $calc(%moototal + $round($calc($disk(R).free  / 1024 / 1024),2)) }
n947=  if ($disk(S) == $true) { set %moodisks %moodisks [ $+ $disk(S).type disk S]: $round($calc($disk(S).size / 1024 / 1024),2) megs / $round($calc($disk(S).free / 1024 / 1024),2) megs free | set %moototal $calc(%moototal + $round($calc($disk(S).free  / 1024 / 1024),2)) }
n948=  if ($disk(T) == $true) { set %moodisks %moodisks [ $+ $disk(T).type disk T]: $round($calc($disk(T).size / 1024 / 1024),2) megs / $round($calc($disk(T).free / 1024 / 1024),2) megs free | set %moototal $calc(%moototal + $round($calc($disk(T).free  / 1024 / 1024),2)) }
n949=  if ($disk(U) == $true) { set %moodisks %moodisks [ $+ $disk(U).type disk U]: $round($calc($disk(U).size / 1024 / 1024),2) megs / $round($calc($disk(U).free / 1024 / 1024),2) megs free | set %moototal $calc(%moototal + $round($calc($disk(U).free  / 1024 / 1024),2)) }
n950=  if ($disk(V) == $true) { set %moodisks %moodisks [ $+ $disk(V).type disk V]: $round($calc($disk(V).size / 1024 / 1024),2) megs / $round($calc($disk(V).free / 1024 / 1024),2) megs free | set %moototal $calc(%moototal + $round($calc($disk(V).free  / 1024 / 1024),2)) }
n951=  if ($disk(W) == $true) { set %moodisks %moodisks [ $+ $disk(W).type disk W]: $round($calc($disk(W).size / 1024 / 1024),2) megs / $round($calc($disk(W).free / 1024 / 1024),2) megs free | set %moototal $calc(%moototal + $round($calc($disk(W).free  / 1024 / 1024),2)) }
n952=  if ($disk(X) == $true) { set %moodisks %moodisks [ $+ $disk(X).type disk X]: $round($calc($disk(X).size / 1024 / 1024),2) megs / $round($calc($disk(X).free / 1024 / 1024),2) megs free | set %moototal $calc(%moototal + $round($calc($disk(X).free  / 1024 / 1024),2)) }
n953=  if ($disk(Y) == $true) { set %moodisks %moodisks [ $+ $disk(Y).type disk Y]: $round($calc($disk(Y).size / 1024 / 1024),2) megs / $round($calc($disk(Y).free / 1024 / 1024),2) megs free | set %moototal $calc(%moototal + $round($calc($disk(Y).free  / 1024 / 1024),2)) }
n954=  if ($disk(Z) == $true) { set %moodisks %moodisks [ $+ $disk(Z).type disk Z]: $round($calc($disk(Z).size / 1024 / 1024),2) megs / $round($calc($disk(Z).free / 1024 / 1024),2) megs free | set %moototal $calc(%moototal + $round($calc($disk(Z).free  / 1024 / 1024),2)) }
n955=  set %moodisks %moodisks [Total Free]: $round(%moototal,2) megs
n956=  return %moodisks
n957=}
n958=
n959=GFTPDreadbans {
n960=  set %GFTPcntr 1
n961=  %GFTPbfile = $readini Gftpd/Gftpd.ini GFTPDDlg BanFile
n962=  set %GFTPip $read -l $+ %GFTPcntr %GFTPbfile
n963=  :readbansloop
n964=  if (%GFTPip != $null) {
n965=    did -a GFTPDdlg 131 $gettok(%GFTPip,1,58)
n966=    did -a GFTPDdlg 136 $gettok(%GFTPip,2,58)
n967=    inc %GFTPcntr 1
n968=    set %GFTPip $read -l $+ %GFTPcntr %GFTPbfile
n969=    goto readbansloop
n970=  }
n971=  unset %GFTPbfile
n972=  unset %GFTPcntr
n973=  unset %GFTPip
n974=}
n975=
n976=GFTPDreadusers {
n977=  set %GFTPcntr 1
n978=  %GFTPufile = gftpd\gftpd.users
n979=  set %GFTPrip $read -l $+ %GFTPcntr %GFTPufile
n980=  :readusersloop
n981=  if ($1 == dialog) && (%GFTPrip != $null) {
n982=    did -a GFTPDdlg 711 %GFTPrip
n983=    inc %GFTPcntr 1
n984=    set %GFTPrip $read -l $+ %GFTPcntr %GFTPufile
n985=    goto readusersloop
n986=  }
n987=  if ($1 == kick) { set %GFTPrip $read -l $+ %GFTPcntr %GFTPufile | set %GFTPrip2 $2 }
n988=  :readusersloop2
n989=  if ($1 == kick) && (%GFTPrip != $null) {
n990=    if ($chr(42) isin %GFTPrip) { set %GFTPrip $remove(%GFTPrip,$chr(42))
n991=      if ($numtok(%GFTPrip,46) == 3) { set %GFTPrip2 $deltok(%GFTPrip2,4,46) $+ . }
n992=      elseif ($numtok(%GFTPrip,46) == 2) { set %GFTPrip2 $deltok(%GFTPrip2,3-4,46) $+ . }
n993=      elseif ($numtok(%GFTPrip,46) == 1) { set %GFTPrip2 $deltok(%GFTPrip2,2-4,46) $+ . }
n994=    }
n995=    if (%GFTPrip == %GFTPrip2) { set %GFTPuserexempt 0 | goto done }
n996=    inc %GFTPcntr 1
n997=    set %GFTPrip $read -l $+ %GFTPcntr %GFTPufile
n998=    goto readusersloop2
n999=  }
n1000=  if ($1 == kick) { set %GFTPuserexempt 1 }
n1001=  :done
n1002=  unset %GFTPufile
n1003=  unset %GFTPcntr
n1004=  unset %GFTPrip
n1005=  unset %GFTPrip2
n1006=}
n1007=
n1008=GFTPDKick {
n1009=  ; $1 = nick/ip/host $2- = kick msg
n1010=  %GFTPInfoColor = $readini Gftpd/Gftpd.ini GFTPDColorDlg InfoColor
n1011=  %GFTPNickColor = $readini Gftpd/Gftpd.ini GFTPDColorDlg NickColor
n1012=  Set %GFTPnick $1 $+ !*@*
n1013=  if ($GFTPDgetline(@GuildFTPD,$1,1) != $null) {
n1014=    dline -l @GuildFTPD $GFTPDgetline(@GuildFTPD,$1,1) 
n1015=  }
n1016=  if ($ial(%GFTPnick,1) != $null) { 
n1017=    dde %GFTPDddename kickuser "" $gettok($ial(%GFTPnick,1),2,64) $2-
n1018=    GFTPDlog $chr(91) $+  $+ %GFTPNickColor $1 On $+ %GFTPNickColor $gettok($ial(%GFTPnick,1),2,64) Has Been $+ %GFTPInfoColor Kicked $chr(93)
n1019=  }
n1020=  else { 
n1021=    dde %GFTPDddename kickuser "" $1 $2-
n1022=    GFTPDlog $chr(91) $+  $+ %GFTPNickColor $1 Has Been $+ %GFTPInfoColor Kicked $chr(93)
n1023=  } 
n1024=  unset %GFTPcntr
n1025=  unset %GFTPnick
n1026=  unset %GFTPNickColor
n1027=  unset %GFTPInfoColor
n1028=  GFTPDStatusUpdate
n1029=}
n1030=
n1031=GFTPDstats {
n1032=  if ($readini Gftpd/Gftpd.ini GFTPDlogDlg GFTPDstats != $null) { return $readini Gftpd/Gftpd.ini GFTPDlogDlg GFTPDstats }
n1033=  else return ! $+ $me $+ -GFTPDstats
n1034=}
n1035=
n1036=GFTPDadmin {
n1037=  if ($readini Gftpd/Gftpd.ini GFTPDlogDlg GFTPDadmin != $null) { return $readini Gftpd/Gftpd.ini GFTPDlogDlg GFTPDadmin }
n1038=  else return NA
n1039=}
n1040=
n1041=GFTPDban {
n1042=  ; $1 = nick/ip/host $2 = duration $3- = kick msg
n1043=  GFTPDkick $1 $3-
n1044=  %GFTPInfoColor = $readini Gftpd/Gftpd.ini GFTPDColorDlg InfoColor
n1045=  %GFTPNickColor = $readini Gftpd/Gftpd.ini GFTPDColorDlg NickColor
n1046=  Set %GFTPnick $1 $+ !*@*
n1047=  if ($ial(%GFTPnick,1) != $null) {
n1048=    dde %GFTPDddename banuser "" $gettok($ial(%GFTPnick,1),2,64) $2
n1049=    GFTPDlog $chr(91) $+  $+ %GFTPNickColor $1 On $+ %GFTPNickColor $gettok($ial(%GFTPnick,1),2,64) Has Been $+ %GFTPInfoColor Banned $chr(93)
n1050=  }    
n1051=  else {
n1052=    dde %GFTPDddename banuser "" $1 $2
n1053=    GFTPDlog $chr(91) $+  $+ %GFTPNickColor $1 Has Been $+ %GFTPInfoColor Banned $chr(93) 
n1054=  } 
n1055=  unset %GFTPnick
n1056=  unset %GFTPInfoColor
n1057=  unset %GFTPNickColor
n1058=  GFTPDStatusUpdate
n1059=}
n1060=
n1061=GFTPDConnUpdate {
n1062=  ;$1=  INTERNALNO - $2=  ACCTNAME - $3=  IPADDR - $4=  HOSTNAME - $5- =  ACTION
n1063=  GFTPDnotexempt $2
n1064=  GFTPDreadusers kick $3
n1065=  set %GFTPhost *!*@ $+ $4
n1066=  set %GFTPip *!*@ $+ $3
n1067=  %GFTPInfoColor = $readini Gftpd/Gftpd.ini GFTPDColorDlg InfoColor
n1068=  %GFTPNickColor = $readini Gftpd/Gftpd.ini GFTPDColorDlg NickColor
n1069=  %GFTPFastuserColor = $readini Gftpd/Gftpd.ini GFTPDColorDlg FastUserColor
n1070=  %GFTPFastKbs = $readini Gftpd/Gftpd.ini GFTPDDlg Fastkbs
n1071=  %GFTPChan1 = $GFTPDncsplit(chan,$readini(Gftpd/Gftpd.ini,GFTPDDlg,Chan1))
n1072=  %GFTPChan2 = $GFTPDncsplit(chan,$readini(Gftpd/Gftpd.ini,GFTPDDlg,Chan2))
n1073=  %GFTPChan3 = $GFTPDncsplit(chan,$readini(Gftpd/Gftpd.ini,GFTPDDlg,Chan3))
n1074=  %GFTPChan4 = $GFTPDncsplit(chan,$readini(Gftpd/Gftpd.ini,GFTPDDlg,Chan4))
n1075=  %GFTPChan5 = $GFTPDncsplit(chan,$readini(Gftpd/Gftpd.ini,GFTPDDlg,Chan5))
n1076=  %GFTPChan6 = $GFTPDncsplit(chan,$readini(Gftpd/Gftpd.ini,GFTPDDlg,Chan6))
n1077=  %GFTPChan7 = $GFTPDncsplit(chan,$readini(Gftpd/Gftpd.ini,GFTPDDlg,Chan7))
n1078=  %GFTPChan8 = $GFTPDncsplit(chan,$readini(Gftpd/Gftpd.ini,GFTPDDlg,Chan8))
n1079=  %GFTPChan9 = $GFTPDncsplit(chan,$readini(Gftpd/Gftpd.ini,GFTPDDlg,Chan9))
n1080=  %GFTPChan10 = $GFTPDncsplit(chan,$readini(Gftpd/Gftpd.ini,GFTPDDlg,Chan10))
n1081=  %GFTPNet1 = $GFTPDncsplit(net,$readini(Gftpd/Gftpd.ini,GFTPDDlg,Chan1))
n1082=  %GFTPNet2 = $GFTPDncsplit(net,$readini(Gftpd/Gftpd.ini,GFTPDDlg,Chan2))
n1083=  %GFTPNet3 = $GFTPDncsplit(net,$readini(Gftpd/Gftpd.ini,GFTPDDlg,Chan3))
n1084=  %GFTPNet4 = $GFTPDncsplit(net,$readini(Gftpd/Gftpd.ini,GFTPDDlg,Chan4))
n1085=  %GFTPNet5 = $GFTPDncsplit(net,$readini(Gftpd/Gftpd.ini,GFTPDDlg,Chan5))
n1086=  %GFTPNet6 = $GFTPDncsplit(net,$readini(Gftpd/Gftpd.ini,GFTPDDlg,Chan6))
n1087=  %GFTPNet7 = $GFTPDncsplit(net,$readini(Gftpd/Gftpd.ini,GFTPDDlg,Chan7))
n1088=  %GFTPNet8 = $GFTPDncsplit(net,$readini(Gftpd/Gftpd.ini,GFTPDDlg,Chan8))
n1089=  %GFTPNet9 = $GFTPDncsplit(net,$readini(Gftpd/Gftpd.ini,GFTPDDlg,Chan9))
n1090=  %GFTPNet10 = $GFTPDncsplit(net,$readini(Gftpd/Gftpd.ini,GFTPDDlg,Chan10))
n1091=  %GFTPKickNotOnChan = $readini Gftpd/Gftpd.ini GFTPDDlg KickNotOnChan
n1092=  if ($readini Gftpd/Gftpd.ini GFTPDDlg VoicedOnChan == 0) { %GFTPVoicedOnChan = !ison }
n1093=  elseif ($readini Gftpd/Gftpd.ini GFTPDDlg VoicedOnChan == 1) { %GFTPVoicedOnChan = !isvoice }
n1094=  %GFTPBanNotOnChan = $readini Gftpd/Gftpd.ini GFTPDDlg BanNotOnChan
n1095=  %GFTPNotOnChanBanDur = $readini Gftpd/Gftpd.ini GFTPDDlg NotOnChanBanDur
n1096=  %GFTPLeaveAfter = $readini Gftpd/Gftpd.ini GFTPDDlg LeaveAfter
n1097=  %GFTPExemptEnable = $readini Gftpd/Gftpd.ini GFTPDDlg ExemptEnable
n1098=  set %gftpdcidloopa 1
n1099=  set %gftpdcidnuma $scon(0)   
n1100=  while (%gftpdcidloopa <= %gftpdcidnuma) {
n1101=    if ($scon(%gftpdcidloopa).$network == %GFTPNet1) || ($scon(%gftpdcidloopa).$network == %GFTPNet2) || ($scon(%gftpdcidloopa).$network == %GFTPNet3) || ($scon(%gftpdcidloopa).$network == %GFTPNet4) || ($scon(%gftpdcidloopa).$network == %GFTPNet5) || ($scon(%gftpdcidloopa).$network == %GFTPNet6) || ($scon(%gftpdcidloopa).$network == %GFTPNet7) || ($scon(%gftpdcidloopa).$network == %GFTPNet8) || ($scon(%gftpdcidloopa).$network == %GFTPNet9) || ($scon(%gftpdcidloopa).$network == %GFTPNet10) {
n1102=      scon %gftpdcidloopa
n1103=      if (. !isin %GFTPhost) { set %GFTPnick $ial(%GFTPip,1).nick }
n1104=      else { 
n1105=        set %GFTPnick $ial(%GFTPhost,1).nick
n1106=        if ($ial(%GFTPip,0) != 0) { set %GFTPnick $ial(%GFTPip,1).nick }
n1107=      }
n1108=      if (%GFTPnick == $null) { set %GFTPnick $3 }
n1109=      if (. !isin %GFTPnick) { goto cidnickdone }
n1110=    }
n1111=    inc %gftpdcidloopa
n1112=  }
n1113=  :cidnickdone
n1114=  set %gftpdcidloopa 1
n1115=  set %gftpdcidnuma $scon(0)   
n1116=  while (%gftpdcidloopa <= %gftpdcidnuma) {
n1117=    if ($scon(%gftpdcidloopa).$network == %GFTPNet1) || ($scon(%gftpdcidloopa).$network == %GFTPNet2) || ($scon(%gftpdcidloopa).$network == %GFTPNet3) || ($scon(%gftpdcidloopa).$network == %GFTPNet4) || ($scon(%gftpdcidloopa).$network == %GFTPNet5) || ($scon(%gftpdcidloopa).$network == %GFTPNet6) || ($scon(%gftpdcidloopa).$network == %GFTPNet7) || ($scon(%gftpdcidloopa).$network == %GFTPNet8) || ($scon(%gftpdcidloopa).$network == %GFTPNet9) || ($scon(%gftpdcidloopa).$network == %GFTPNet10) {
n1118=      scon %gftpdcidloopa
n1119=      if ($ialchan(*,%GFTPchan1,0) != $nick(%GFTPchan1,0)) { set %GFTPWhoFull 0 }
n1120=      elseif ($ialchan(*,%GFTPchan2,0) != $nick(%GFTPchan2,0)) { set %GFTPWhoFull 0 }
n1121=      elseif ($ialchan(*,%GFTPchan3,0) != $nick(%GFTPchan3,0)) { set %GFTPWhoFull 0 }
n1122=      elseif ($ialchan(*,%GFTPchan4,0) != $nick(%GFTPchan4,0)) { set %GFTPWhoFull 0 }
n1123=      elseif ($ialchan(*,%GFTPchan5,0) != $nick(%GFTPchan5,0)) { set %GFTPWhoFull 0 }
n1124=      elseif ($ialchan(*,%GFTPchan6,0) != $nick(%GFTPchan6,0)) { set %GFTPWhoFull 0 }
n1125=      elseif ($ialchan(*,%GFTPchan7,0) != $nick(%GFTPchan7,0)) { set %GFTPWhoFull 0 }
n1126=      elseif ($ialchan(*,%GFTPchan8,0) != $nick(%GFTPchan8,0)) { set %GFTPWhoFull 0 }
n1127=      elseif ($ialchan(*,%GFTPchan9,0) != $nick(%GFTPchan9,0)) { set %GFTPWhoFull 0 }
n1128=      elseif ($ialchan(*,%GFTPchan10,0) != $nick(%GFTPchan10,0)) { set %GFTPWhoFull 0 }
n1129=      else {
n1130=        set %GFTPWhoFull 1
n1131=        goto ciddone
n1132=      }
n1133=    }
n1134=    inc %gftpdcidloopa
n1135=  }
n1136=  :ciddone
n1137=  unset %gftpdcidloopa %gftpdcidnuma
n1138=  if (%GFTPnick == $null) { set %GFTPnick $3 }
n1139=  aline -ln @GuildFTPD %GFTPnick $2 $3
n1140=  GFTPDlog $chr(91) $+  $+ %GFTPNickColor %GFTPnick On $+ %GFTPInfoColor $2 Account Is $+ %GFTPInfoColor $5-  $+ $chr(93)
n1141=  if (. !isin %GFTPnick) { dde %GFTPDddename setnick "" $3 %GFTPnick }
n1142=  if (%GFTPWhoFull == 0) {
n1143=    set %gftpdcidloopa 1
n1144=    set %gftpdcidnuma $scon(0)   
n1145=    while (%gftpdcidloopa <= %gftpdcidnuma) {
n1146=      if ($scon(%gftpdcidloopa).$network == %GFTPNet1) || ($scon(%gftpdcidloopa).$network == %GFTPNet2) || ($scon(%gftpdcidloopa).$network == %GFTPNet3) || ($scon(%gftpdcidloopa).$network == %GFTPNet4) || ($scon(%gftpdcidloopa).$network == %GFTPNet5) || ($scon(%gftpdcidloopa).$network == %GFTPNet6) || ($scon(%gftpdcidloopa).$network == %GFTPNet7) || ($scon(%gftpdcidloopa).$network == %GFTPNet8) || ($scon(%gftpdcidloopa).$network == %GFTPNet9) || ($scon(%gftpdcidloopa).$network == %GFTPNet10) {
n1147=        scon %gftpdcidloopa
n1148=        if ($me !ison %GFTPchan1) && ($me !ison %GFTPchan2) && ($me !ison %GFTPchan3) && ($me !ison %GFTPchan4) && ($me !ison %GFTPchan5) && ($me !ison %GFTPchan6) && ($me !ison %GFTPchan7) && ($me !ison %GFTPchan8) && ($me !ison %GFTPchan9) && ($me !ison %GFTPchan10) { goto cidwhodone }
n1149=        if (%GFTPnick !ison %GFTPchan1) && (%GFTPnick !ison %GFTPchan2) && (%GFTPnick !ison %GFTPchan3) && (%GFTPnick !ison %GFTPchan4) && (%GFTPnick !ison %GFTPchan5) && (%GFTPnick !ison %GFTPchan6) && (%GFTPnick !ison %GFTPchan7) && (%GFTPnick !ison %GFTPchan8) && (%GFTPnick !ison %GFTPchan9) && (%GFTPnick !ison %GFTPchan10) { 
n1150=          GFTPDlog $chr(91)  $+ %GFTPInfoColor mIRC's Internal Address List is not updated, perform a Status Update in @GuildFTPD $chr(93)
n1151=          goto cidwhodone
n1152=        }
n1153=      }
n1154=      inc %gftpdcidloopa
n1155=    }
n1156=  }
n1157=  :cidwhodone
n1158=  unset %gftpdcidloopa %gftpdcidnuma
n1159=  if (%GFTPWhoFull == 1) && (%GFTPBanNotOnChan == 1) && (%GFTPisexempt == 1) && (%GFTPleaveafter == 0) && (%GFTPuserexempt == 1) {
n1160=    set %gftpcidban 0
n1161=    set %gftpdcidloopa 1
n1162=    set %gftpdcidnuma $scon(0)   
n1163=    while (%gftpdcidloopa <= %gftpdcidnuma) {
n1164=      if ($scon(%gftpdcidloopa).$network == %GFTPNet1) || ($scon(%gftpdcidloopa).$network == %GFTPNet2) || ($scon(%gftpdcidloopa).$network == %GFTPNet3) || ($scon(%gftpdcidloopa).$network == %GFTPNet4) || ($scon(%gftpdcidloopa).$network == %GFTPNet5) || ($scon(%gftpdcidloopa).$network == %GFTPNet6) || ($scon(%gftpdcidloopa).$network == %GFTPNet7) || ($scon(%gftpdcidloopa).$network == %GFTPNet8) || ($scon(%gftpdcidloopa).$network == %GFTPNet9) || ($scon(%gftpdcidloopa).$network == %GFTPNet10) {
n1165=        scon %gftpdcidloopa
n1166=        if ($me !ison %GFTPchan1) && ($me !ison %GFTPchan2) && ($me !ison %GFTPchan3) && ($me !ison %GFTPchan4) && ($me !ison %GFTPchan5) && ($me !ison %GFTPchan6) && ($me !ison %GFTPchan7) && ($me !ison %GFTPchan8) && ($me !ison %GFTPchan9) && ($me !ison %GFTPchan10) { goto cidkbdone }
n1167=        if ($GFTPDnickmode(%GFTPnick,%GFTPchan1,%GFTPVoicedOnChan) == 0) && ($GFTPDnickmode(%GFTPnick,%GFTPchan2,%GFTPVoicedOnChan) == 0) && ($GFTPDnickmode(%GFTPnick,%GFTPchan3,%GFTPVoicedOnChan) == 0) && ($GFTPDnickmode(%GFTPnick,%GFTPchan4,%GFTPVoicedOnChan) == 0) && ($GFTPDnickmode(%GFTPnick,%GFTPchan5,%GFTPVoicedOnChan) == 0) && ($GFTPDnickmode(%GFTPnick,%GFTPchan6,%GFTPVoicedOnChan) == 0) && ($GFTPDnickmode(%GFTPnick,%GFTPchan7,%GFTPVoicedOnChan) == 0) && ($GFTPDnickmode(%GFTPnick,%GFTPchan8,%GFTPVoicedOnChan) == 0) && ($GFTPDnickmode(%GFTPnick,%GFTPchan9,%GFTPVoicedOnChan) == 0) && ($GFTPDnickmode(%GFTPnick,%GFTPchan10,%GFTPVoicedOnChan) == 0) {
n1168=          inc %gftpcidban
n1169=        }
n1170=      }
n1171=      inc %gftpdcidloopa
n1172=    }
n1173=    if (%gftpcidban >= $calc(%gftpdcidloopa - 1)) {
n1174=      if (%GFTPVoicedOnChan == !ison) { GFTPDlog $chr(91) $+  $+ %GFTPNickColor %GFTPnick Is Being $+ %GFTPInfoColor Banned for $+ %GFTPInfoColor %GFTPNotOnChanBanDur (min) for not being on $+ %GFTPInfoColor Any Monitored Channels  $+ $chr(93) }
n1175=      elseif (%GFTPVoicedOnChan == !isvoice) { GFTPDlog $chr(91) $+  $+ %GFTPNickColor %GFTPnick Is Being $+ %GFTPInfoColor Banned for $+ %GFTPInfoColor %GFTPNotOnChanBanDur (min) for not being VOICED on $+ %GFTPInfoColor Any Monitored Channels  $+ $chr(93) }
n1176=      dde %GFTPDddename kickuser "" $3 You have been kicked for not being in any monitered channels
n1177=      dde %GFTPDddename banuser "" $3 %GFTPNotOnChanBanDur
n1178=    }
n1179=    unset %gftpdcidloopa %gftpdcidnuma %gftpcidban
n1180=  }
n1181=  if (%GFTPWhoFull == 1) && (%GFTPBanNotOnChan == 0) && (%GFTPisexempt == 1) && (%GFTPleaveafter == 0) && (%GFTPKickNotOnChan == 1) && (%GFTPuserexempt == 1) {
n1182=    set %gftpcidkick 0
n1183=    set %gftpdcidloopa 1
n1184=    set %gftpdcidnuma $scon(0)   
n1185=    while (%gftpdcidloopa <= %gftpdcidnuma) {
n1186=      if ($scon(%gftpdcidloopa).$network == %GFTPNet1) || ($scon(%gftpdcidloopa).$network == %GFTPNet2) || ($scon(%gftpdcidloopa).$network == %GFTPNet3) || ($scon(%gftpdcidloopa).$network == %GFTPNet4) || ($scon(%gftpdcidloopa).$network == %GFTPNet5) || ($scon(%gftpdcidloopa).$network == %GFTPNet6) || ($scon(%gftpdcidloopa).$network == %GFTPNet7) || ($scon(%gftpdcidloopa).$network == %GFTPNet8) || ($scon(%gftpdcidloopa).$network == %GFTPNet9) || ($scon(%gftpdcidloopa).$network == %GFTPNet10) {
n1187=        scon %gftpdcidloopa
n1188=        if ($me !ison %GFTPchan1) && ($me !ison %GFTPchan2) && ($me !ison %GFTPchan3) && ($me !ison %GFTPchan4) && ($me !ison %GFTPchan5) && ($me !ison %GFTPchan6) && ($me !ison %GFTPchan7) && ($me !ison %GFTPchan8) && ($me !ison %GFTPchan9) && ($me !ison %GFTPchan10) { goto cidkbdone }
n1189=        if ($GFTPDnickmode(%GFTPnick,%GFTPchan1,%GFTPVoicedOnChan) == 0) && ($GFTPDnickmode(%GFTPnick,%GFTPchan2,%GFTPVoicedOnChan) == 0) && ($GFTPDnickmode(%GFTPnick,%GFTPchan3,%GFTPVoicedOnChan) == 0) && ($GFTPDnickmode(%GFTPnick,%GFTPchan4,%GFTPVoicedOnChan) == 0) && ($GFTPDnickmode(%GFTPnick,%GFTPchan5,%GFTPVoicedOnChan) == 0) && ($GFTPDnickmode(%GFTPnick,%GFTPchan6,%GFTPVoicedOnChan) == 0) && ($GFTPDnickmode(%GFTPnick,%GFTPchan7,%GFTPVoicedOnChan) == 0) && ($GFTPDnickmode(%GFTPnick,%GFTPchan8,%GFTPVoicedOnChan) == 0) && ($GFTPDnickmode(%GFTPnick,%GFTPchan9,%GFTPVoicedOnChan) == 0) && ($GFTPDnickmode(%GFTPnick,%GFTPchan10,%GFTPVoicedOnChan) == 0) {
n1190=          inc %gftpcidkick
n1191=        }
n1192=      }
n1193=      inc %gftpdcidloopa
n1194=    }
n1195=    if (%gftpcidkick >= $calc(%gftpdcidloopa - 1)) {
n1196=      if (%GFTPVoicedOnChan == !ison) { GFTPDlog $chr(91) $+  $+ %GFTPNickColor %GFTPnick Has Been $+ %GFTPInfoColor Kicked For Not Being On $+ %GFTPInfoColor Any Monitored Channels  $+ $chr(93) }
n1197=      elseif (%GFTPVoicedOnChan == !isvoice) { GFTPDlog $chr(91) $+  $+ %GFTPNickColor %GFTPnick Has Been $+ %GFTPInfoColor Kicked For Not Being VOICED On $+ %GFTPInfoColor Any Monitored Channels  $+ $chr(93) }
n1198=      dde %GFTPDddename kickuser "" $3 You have been kicked for not being in any monitered channels
n1199=    }
n1200=    unset %gftpdcidloopa %gftpdcidnuma %gftpcidkick
n1201=  } 
n1202=  :cidkbdone
n1203=  if ($5 == idle) { 
n1204=    cline -l 14 @GuildFTPD $GFTPDgetline(@GuildFTPD, %GFTPnick,1)
n1205=    if ($read(gftpd\stats.txt,s,$3) != $null) { write -ds $+ $3 gftpd\stats.txt }
n1206=    set %GFTPkbs $right($7,$calc($len($7) - 1)) 
n1207=    write gftpd\stats.txt $3 .ID. 0 ! %GFTPnick
n1208=
n1209=  }
n1210=  if ($5 == Upload:) {
n1211=    cline -l 3 @GuildFTPD $GFTPDgetline(@GuildFTPD,%GFTPnick,1)
n1212=    set %GFTPkbs $round($right($7,$calc($len($7) - 1)) ,0)
n1213=    if (%GFTPkbs >= %GFTPFastKbs) {
n1214=      cline -l %GFTPFastUserColor @GuildFTPD $GFTPDgetline(@GuildFTPD,%GFTPnick,1) $2 $3
n1215=    } 
n1216=    if ($read(gftpd\stats.txt,s,$3) != $null) { write -ds $+ $3 gftpd\stats.txt }
n1217=    write gftpd\stats.txt $3 .UL. %GFTPkbs ! %GFTPnick
n1218=  } 
n1219=  if ($5 == Download:) {
n1220=    ;echo 3= $7-
n1221=    cline -l 10 @GuildFTPD $GFTPDgetline(@GuildFTPD, %GFTPnick,1)
n1222=    ;var %GFTPkbs1 = $7-
n1223=    set %GFTPkbs $round($right($7,$calc($len($7) - 1)) ,0)
n1224=    if (%GFTPkbs >= %GFTPFastKbs) {
n1225=      cline -l %GFTPFastUserColor @GuildFTPD $GFTPDgetline(@GuildFTPD,%GFTPnick,1) $2 $3
n1226=    } 
n1227=    if ($read(gftpd\stats.txt,s,$3) != $null) { write -ds $+ $3 gftpd\stats.txt }
n1228=    write gftpd\stats.txt $3 .DL. %GFTPkbs ! %GFTPnick
n1229=    ;echo 2= %GFTPkbs1
n1230=  }
n1231=  unset %GFTPcntr
n1232=  unset %GFTPWhoFull
n1233=  unset %GFTPuserexempt
n1234=  unset %GFTPisexempt
n1235=  unset %GFTPexemptenable
n1236=  unset %GFTPKickNotOnChan
n1237=  unset %GFTPVoicedOnChan
n1238=  unset %GFTPNotOnChanBanDur
n1239=  unset %GFTPBanNotOnChan
n1240=  unset %GFTPLeaveAfter
n1241=  unset %GFTPInfoColor
n1242=  unset %GFTPNickColor
n1243=  unset %GFTPChan*
n1244=  unset %GFTPNet*
n1245=  unset %GFTPip
n1246=  unset %GFTPnick
n1247=  unset %GFTPhost
n1248=  unset %GFTPFastUserColor
n1249=  unset %GFTPkbs
n1250=  unset %GFTPFastKbs
n1251=}
n1252=
n1253=GFTPDConnsList {
n1254=  ; $1 loginname, $2 = Connections, $3 = IPConnections, $4 = maxConn, $5 = maxIPConn
n1255=  %GFTPConnsList = $replace($readini(Gftpd/Gftpd.ini,GFTPDDlg,ConnsList),$chr(32),$chr(46))
n1256=  %GFTPMaxConnsList = $replace($readini(Gftpd/Gftpd.ini,GFTPDDlg,MaxConnsList),$chr(32),$chr(46))
n1257=  if (%GFTPDconnddecheck == 1) && ($4 == $gettok(%GFTPMaxConnsList,$calc($findtok(%GFTPMaxConnsList,system,1,46) + 1),46)) {
n1258=    unset %GFTPConnsList
n1259=    unset %GFTPMaxConnsList
n1260=    return
n1261=  }
n1262=  if ($istok(%GFTPConnsList,$1,46)) { %GFTPConnsList = $puttok(%GFTPConnsList,$2,$calc($findtok(%GFTPConnsList,$1,1,46) + 1),46)) }
n1263=  else { %GFTPConnsList = %GFTPConnsList $1 $2 }
n1264=  writeini Gftpd/Gftpd.ini GFTPDDlg ConnsList $replace(%GFTPConnsList,$chr(46),$chr(32))
n1265=  if ($istok(%GFTPMaxConnsList,$1,46)) { %GFTPMaxConnsList = $puttok(%GFTPMaxConnsList,$4,$calc($findtok(%GFTPMaxConnsList,$1,1,46) + 1),46)) }
n1266=  else { %GFTPMaxConnsList = %GFTPMaxConnsList $1 $4 }
n1267=  writeini Gftpd/Gftpd.ini GFTPDDlg MaxConnsList $replace(%GFTPMaxConnsList,$chr(46),$chr(32))
n1268=  unset %GFTPConnsList
n1269=  unset %GFTPMaxConnsList
n1270=}
n1271=guildip { .userhost $1 }
n1272=;raw 302:*:{ haltdef | set -u60 % $+ $gettok($2-,2,64) $gettok($replace($gettok($2-,1,64),*,$chr(32),=,$chr(32),+,$chr(32)),1,32) | if (192.168.1.1 !isin $gettok($2-,2,64)) { .dns -h $gettok($2-,2,64) } }
n1273=;on *:dns:{ if ($window(@IP) == $null) { window @IP 0 0 640 200 } | .echo @IP % [ $+ [ $iif(% [ $+ [ $naddress ] ] == $null,$iaddress,$naddress) ] ] = $naddress = $iaddress | /writeini guild.ini Ip $iaddress % [ $+ [ $iif(% [ $+ [ $naddress ] ] == $null,$iaddress,$naddress) ] ] | /writeini ip-host.ini ALL % [ $+ [ $iif(% [ $+ [ $naddress ] ] == $null,$iaddress,$naddress) ] ] = $naddress = $iaddress }
n1274=
n1275=
n1276=;;;##### Not Implemented yet
n1277=; dde guildftpd "" currentconns
n1278=GFTPDCurrentConns {
n1279=  ; $1 = conn1, $2 = conn2, etc ...
n1280=  if ($1 == none) { echo -a no conns }
n1281=  else { echo -a conns $1- }
n1282=}
n1283=
n1284=; dde guildftpd "" bandwidth <internalno>
n1285=GFTPDbandwidth {
n1286=  ; $1 login, $2= ip, $3 = state
n1287=  if ($1 == $null) { echo -a no bw }
n1288=  else { echo -a bandwidth $1- }
n1289=}
n1290=;;;#####
n1291=
n1292=;;;EOF
